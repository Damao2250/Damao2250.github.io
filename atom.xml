<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Damao Bolg</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://damao2250.github.com/"/>
  <updated>2020-12-30T08:14:51.278Z</updated>
  <id>http://damao2250.github.com/</id>
  
  <author>
    <name>Damao</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vue3的setup函数</title>
    <link href="http://damao2250.github.com/2020/12/30/Vue3%E7%9A%84setup%E5%87%BD%E6%95%B0/"/>
    <id>http://damao2250.github.com/2020/12/30/Vue3%E7%9A%84setup%E5%87%BD%E6%95%B0/</id>
    <published>2020-12-30T08:03:09.000Z</published>
    <updated>2020-12-30T08:14:51.278Z</updated>
    
    <content type="html"><![CDATA[<h2 id="setup函数"><a href="#setup函数" class="headerlink" title="setup函数"></a>setup函数</h2><ul><li>setup用于定义变量和方法</li><li>ref用于声明简单数据类型，如：String Number Boolean</li><li>reactive用来声明复杂数据类型，如：Array Objec</li><li>是使用Composition API的入口<ul><li>Composition API的主要思想，将它们定义为从新的setup函数返回的JavaScript变量，而不是从组件的功能（如：data、methods、computed等）定义为对象的属性</li><li>Composition API 代替 Vue Mixins （解决命名冲突、隐式依赖、代码重用等问题）</li></ul></li><li>在生命周期beforeCreate前被调用（执行setup时，组件实例尚未被创建）</li><li>可以返回一个对象，这个对象的属性会被合并到渲染上下文，可以在模板中直接使用</li><li>也可以返回一个渲染函数，如：<code>return () =&gt; h('div', [count.value, object.foo])</code></li><li>在setup中没有this</li><li>接收props作为第一个参数，如果props为对象，可通过watchEffect监视其变化</li><li>接收context作为第二个参数，这个对象包含attrs、slots、emit三个属性</li><li>context非响应式，可以直接解构使用 <code>setup(props,{attr,slots,emit}){}</code></li><li>执行setup函数时可以访问：props、attrs、slots、emit，不可以访问：data、computed、methods</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> { ref, reactive, toRefs, isRef } <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> defalut {</span><br><span class="line">  props:{</span><br><span class="line">    title: <span class="built_in">String</span></span><br><span class="line">  },</span><br><span class="line">  setup( props, context ){</span><br><span class="line">    <span class="built_in">console</span>.log(props.title); <span class="comment">// 不能直接解构</span></span><br><span class="line">    <span class="keyword">const</span> { title } = toRefs(props)</span><br><span class="line">    <span class="keyword">let</span> count = ref(<span class="number">0</span>) <span class="comment">// 声明简单数据类型</span></span><br><span class="line">    <span class="built_in">console</span>.log(count.valeu); </span><br><span class="line">    <span class="built_in">console</span>.log(isRef(count)); <span class="comment">// 判断是否为ref创建出来的对象</span></span><br><span class="line">    <span class="keyword">let</span> arr = reactive([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]) <span class="comment">// 声明复杂数据类型</span></span><br><span class="line">    <span class="keyword">let</span> addOne = <span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">      count.value++ <span class="comment">// 想改变或获取值 必须 xxx.value</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Attribute(非响应式对象)</span></span><br><span class="line">    <span class="built_in">console</span>.log(context.attrs)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插槽(非响应式对象)</span></span><br><span class="line">    <span class="built_in">console</span>.log(context.slots)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 触发时间（方法）</span></span><br><span class="line">    <span class="built_in">console</span>.log(content.emit)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> { <span class="comment">// 必须返回 模板中才能使用</span></span><br><span class="line">      count, arr, addOne</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;setup函数&quot;&gt;&lt;a href=&quot;#setup函数&quot; class=&quot;headerlink&quot; title=&quot;setup函数&quot;&gt;&lt;/a&gt;setup函数&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;setup用于定义变量和方法&lt;/li&gt;
&lt;li&gt;ref用于声明简单数据类型，如：Stri
      
    
    </summary>
    
    
    
      <category term="Vue3" scheme="http://damao2250.github.com/tags/Vue3/"/>
    
  </entry>
  
  <entry>
    <title>小程序通知推送</title>
    <link href="http://damao2250.github.com/2020/12/29/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%80%9A%E7%9F%A5%E6%8E%A8%E9%80%81/"/>
    <id>http://damao2250.github.com/2020/12/29/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%80%9A%E7%9F%A5%E6%8E%A8%E9%80%81/</id>
    <published>2020-12-29T09:14:48.000Z</published>
    <updated>2020-12-29T09:16:51.693Z</updated>
    
    <content type="html"><![CDATA[<h1 id="小程序推送通知方式（订阅消息-amp-消息模板）"><a href="#小程序推送通知方式（订阅消息-amp-消息模板）" class="headerlink" title="小程序推送通知方式（订阅消息&amp;消息模板）"></a>小程序推送通知方式（订阅消息&amp;消息模板）</h1><h2 id="小程序发送小程序的订阅消息-推送到服务通知"><a href="#小程序发送小程序的订阅消息-推送到服务通知" class="headerlink" title="小程序发送小程序的订阅消息(推送到服务通知)"></a>小程序发送小程序的订阅消息(推送到服务通知)</h2><ul><li><p>准备1：登录小程序-功能-订阅消息（未开通的，需要先开通）-从模板库中添加消息模板并获得模板ID（也可以申请消息模板）</p></li><li><p>步骤：</p><ul><li>获取下发权限 （用户发生点击行为或者发起支付回调后）— 调用接口下发订阅消息</li><li>获取<code>js_code</code></li><li>根据<code>js_code</code>获取<code>OpenId</code>和<code>UnionID</code></li><li>获取小程序<code>access_token</code></li><li>根据<code>access_token</code>调用接口下发订阅消息</li></ul></li><li><p>参考的开发文档</p><ul><li><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeMessage.html" target="_blank" rel="noopener">获取下发权限</a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/subscribe-message/subscribeMessage.send.html" target="_blank" rel="noopener">调用接口下发订阅消息</a></li></ul></li></ul><h2 id="小程序调用公众号的消息模板-推送到微信公众号"><a href="#小程序调用公众号的消息模板-推送到微信公众号" class="headerlink" title="小程序调用公众号的消息模板(推送到微信公众号)"></a>小程序调用公众号的消息模板(推送到微信公众号)</h2><ul><li><p>准备1：注册<code>微信开放平台</code>，将<code>微信公众号</code>和<code>小程</code>序绑定到<code>微信开放平台</code>（目的：获取<code>UnionID</code>）</p></li><li><p>准备2：微信公众号添加<code>消息模板</code>功能，从模板库中添加消息模板并获得模板ID，也可以申请模板</p></li><li><p>步骤：(根据用户唯一的<code>UnionID</code>去寻找用户在公众号的<code>OpenId</code>,再根据微信公众号的<code>OpenId</code>发送通知到相应的用户)</p><ul><li>批量获取微信公众号关注的用户<code>Openid</code></li><li>根据用户<code>Openid</code>获取微信公众号关注的用户<code>UnionID</code></li><li>将微信公众号关注的用户<code>Openid</code>、<code>UnionID</code>保存到数据库</li></ul><ul><li>两种方式获取小程序用户<code>UnionID</code><ul><li>根据<code>js_code</code>获取小程序的<code>OpenId</code>和<code>UnionID</code></li><li>根据小程序的<code>OpenId</code>、<code>access_token</code>获取用户信息UserInfo，根据UserInfo的<code>encryptedData</code>字段解密出小程序的<code>UnionID</code>（不推荐）</li></ul></li></ul><ul><li>根据小程序<code>appid</code>、<code>secret</code>获取小程序<code>access_token</code></li><li>根据小程序的<code>UnionID</code>去数据库匹配用户在公众号的<code>OpenId</code></li><li>根据用户在公众号的<code>OpenId</code>、<code>access_token</code>发送消息模板到对应用户</li></ul></li><li><p>参考的开发文档</p><ul><li><p><a href="https://open.weixin.qq.com" target="_blank" rel="noopener">微信开放平台登录</a></p></li><li><p><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener">微信公众号登录</a></p></li><li><p><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener">微信小程序登录</a></p></li><li><p><a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Template_Message_Interface.html" target="_blank" rel="noopener">公众号消息模板接口</a></p></li><li><p><a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Receiving_event_pushes.html" target="_blank" rel="noopener">公众号关注/取消关注事件</a>：微信公众号-开发-基本配置-服务器配置-启用</p></li><li><p><a href="https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Access_Overview.html" target="_blank" rel="noopener">服务器配置</a></p></li><li><p><a href="https://developers.weixin.qq.com/doc/offiaccount/User_Management/Getting_a_User_List.html" target="_blank" rel="noopener">公众号获取用户列表/获取OpenId</a></p></li><li><p><a href="https://developers.weixin.qq.com/doc/offiaccount/User_Management/Get_users_basic_information_UnionID.html#UinonId" target="_blank" rel="noopener">公众号获取用户基本信息(UnionID)</a></p></li><li><p><a href="https://developers.weixin.qq.com/doc/offiaccount/Basic_Information/Get_access_token.html" target="_blank" rel="noopener">公众号获取Access token</a></p></li><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html" target="_blank" rel="noopener">小程序获取js_code</a></p></li><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/login/auth.code2Session.html" target="_blank" rel="noopener">小程序获取OpenId和UnionID/获取code2Session</a></p></li><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html" target="_blank" rel="noopener">小程序获取access_token</a></p></li><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html" target="_blank" rel="noopener">小程序获取用户信息UserInfo</a></p></li><li><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html#%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%AF%86%E7%AE%97%E6%B3%95" target="_blank" rel="noopener">UserInfo解密算法解密</a></p></li><li><p><a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Template_Message_Interface.html#5" target="_blank" rel="noopener">公众号消息模板发送</a></p></li></ul></li></ul><h2 id="下发统一服务消息（官方不支持了）"><a href="#下发统一服务消息（官方不支持了）" class="headerlink" title="下发统一服务消息（官方不支持了）"></a>下发统一服务消息（官方不支持了）</h2><ul><li>下发小程序和公众号统一的服务消息（需要填小程序模板id和公众号模板id）</li></ul><h2 id="小程序消息模板（已废弃）"><a href="#小程序消息模板（已废弃）" class="headerlink" title="小程序消息模板（已废弃）"></a>小程序消息模板（已废弃）</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;小程序推送通知方式（订阅消息-amp-消息模板）&quot;&gt;&lt;a href=&quot;#小程序推送通知方式（订阅消息-amp-消息模板）&quot; class=&quot;headerlink&quot; title=&quot;小程序推送通知方式（订阅消息&amp;amp;消息模板）&quot;&gt;&lt;/a&gt;小程序推送通知方式（订阅消息
      
    
    </summary>
    
    
    
      <category term="小程序" scheme="http://damao2250.github.com/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>一份参考用的axios封装</title>
    <link href="http://damao2250.github.com/2020/11/19/%E4%B8%80%E4%BB%BD%E5%8F%82%E8%80%83%E7%94%A8%E7%9A%84axios%E5%B0%81%E8%A3%85/"/>
    <id>http://damao2250.github.com/2020/11/19/%E4%B8%80%E4%BB%BD%E5%8F%82%E8%80%83%E7%94%A8%E7%9A%84axios%E5%B0%81%E8%A3%85/</id>
    <published>2020-11-19T12:51:43.000Z</published>
    <updated>2020-12-28T07:18:31.053Z</updated>
    
    <content type="html"><![CDATA[<ul><li>一份拷贝即用的<code>axios</code>封装代码</li></ul><h2 id="安装Axios"><a href="#安装Axios" class="headerlink" title="安装Axios"></a>安装Axios</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios, { AxiosRequestConfig, AxiosResponse } <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showStatus = <span class="function">(<span class="params">status: number</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">let</span> message = <span class="string">''</span></span><br><span class="line">  <span class="keyword">switch</span> (status) {</span><br><span class="line">    <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">      message = <span class="string">'请求错误(400)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">      message = <span class="string">'未授权，请重新登录(401)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">      message = <span class="string">'拒绝访问(403)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">      message = <span class="string">'请求出错(404)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">408</span>:</span><br><span class="line">      message = <span class="string">'请求超时(408)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">      message = <span class="string">'服务器错误(500)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">501</span>:</span><br><span class="line">      message = <span class="string">'服务未实现(501)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">502</span>:</span><br><span class="line">      message = <span class="string">'网络错误(502)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">503</span>:</span><br><span class="line">      message = <span class="string">'服务不可用(503)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">504</span>:</span><br><span class="line">      message = <span class="string">'网络超时(504)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">505</span>:</span><br><span class="line">      message = <span class="string">'HTTP版本不受支持(505)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      message = <span class="string">`连接出错(<span class="subst">${status}</span>)!`</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">${message}</span>，请检查网络或联系管理员！`</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.create({</span><br><span class="line">  <span class="comment">// 联调</span></span><br><span class="line">  baseURL: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="string">`/`</span> : <span class="string">'/apis'</span>,</span><br><span class="line">  headers: {</span><br><span class="line">    <span class="keyword">get</span>: {</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded;charset=utf-8'</span></span><br><span class="line">    },</span><br><span class="line">    post: {</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=utf-8'</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// 是否跨站点访问控制请求</span></span><br><span class="line">  withCredentials: <span class="literal">true</span>,</span><br><span class="line">  timeout: <span class="number">30000</span>,</span><br><span class="line">  transformRequest: [<span class="function">(<span class="params">data</span>) =&gt;</span> {</span><br><span class="line">    data = <span class="built_in">JSON</span>.stringify(data)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  }],</span><br><span class="line">  validateStatus () {</span><br><span class="line">    <span class="comment">// 使用async-await，处理reject情况较为繁琐，所以全部返回resolve，在业务代码中处理异常</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line">  transformResponse: [<span class="function">(<span class="params">data</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">'string'</span> &amp;&amp; data.startsWith(<span class="string">'{'</span>)) {</span><br><span class="line">      data = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  }]</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">service.interceptors.request.use(<span class="function">(<span class="params">config: AxiosRequestConfig</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">}, (error) =&gt; {</span><br><span class="line">    <span class="comment">// 错误抛到业务代码</span></span><br><span class="line">    error.data = {}</span><br><span class="line">    error.data.msg = <span class="string">'服务器异常，请联系管理员！'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(error)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">service.interceptors.response.use(<span class="function">(<span class="params">response: AxiosResponse</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> status = response.status</span><br><span class="line">    <span class="keyword">let</span> msg = <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span> (status &lt; <span class="number">200</span> || status &gt;= <span class="number">300</span>) {</span><br><span class="line">        <span class="comment">// 处理http错误，抛到业务代码</span></span><br><span class="line">        msg = showStatus(status)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> response.data === <span class="string">'string'</span>) {</span><br><span class="line">            response.data = {msg}</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            response.data.msg = msg</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">}, (error) =&gt; {</span><br><span class="line">    <span class="comment">// 错误抛到业务代码</span></span><br><span class="line">    error.data = {}</span><br><span class="line">    error.data.msg = <span class="string">'请求超时或服务器异常，请检查网络或联系管理员！'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(error)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></tbody></table></figure><h2 id="一些关于Axios的注释"><a href="#一些关于Axios的注释" class="headerlink" title="一些关于Axios的注释"></a>一些关于Axios的注释</h2><ul><li>请求方法应为小写：<code>method: get/post/put/delete</code>在axios内部全部转为小写</li><li>Axios实现原理是基于 <code>XMLHttpRequest</code>  详细可见’axios/lib/adapters/xhr.js’#20</li><li>‘axios/lib/adapters/xhr.js’ -&gt; 浏览器请求模块</li><li>‘axios/lib/cancel/Cancel.js’ -&gt; 取消请求模块</li><li>‘axios/lib/core/Axios.js’ -&gt; 发送请求模块</li><li>‘axios/Defaults.js’ -&gt; 默认配置模块</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;一份拷贝即用的&lt;code&gt;axios&lt;/code&gt;封装代码&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;安装Axios&quot;&gt;&lt;a href=&quot;#安装Axios&quot; class=&quot;headerlink&quot; title=&quot;安装Axios&quot;&gt;&lt;/a&gt;安装Axios&lt;/h2&gt;&lt;fi
      
    
    </summary>
    
    
    
      <category term="axios" scheme="http://damao2250.github.com/tags/axios/"/>
    
  </entry>
  
  <entry>
    <title>网页安全策略---CSP</title>
    <link href="http://damao2250.github.com/2020/11/18/%E7%BD%91%E9%A1%B5%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5-CSP/"/>
    <id>http://damao2250.github.com/2020/11/18/%E7%BD%91%E9%A1%B5%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5-CSP/</id>
    <published>2020-11-18T02:37:30.000Z</published>
    <updated>2020-11-18T03:33:17.497Z</updated>
    
    <content type="html"><![CDATA[<p><code>Content Security Policy</code> （网页安全策略或内容安全策略，简称 <code>CSP</code>)，主要用于检测并削弱某些特定类型的攻击，如跨站脚本(<code>xss</code>)、数据注入攻击等，相当于是让浏览器自动禁止外部注入恶意脚本</p><ul><li><p><code>CSP</code>的实质就是白名单制度，开发者明确告诉客户端，哪些外部资源可以加载和执行，它的实现和执行全部由浏览器完成，开发者只需要提供配置</p></li><li><p>两种启用<code>CSP</code>方式</p><ul><li>①通过HTTP头部信息的<code>Content-Security-Policy</code>字段添加指定策略<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Security-Policy: script-src <span class="string">'self'</span>; boject-src <span class="string">'none'</span>; style-src cdn.example.org third-party.org; child-src https:</span><br></pre></td></tr></tbody></table></figure></li><li>②通过网页的<code>&lt;meta&gt;</code>标签<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">'Content-Security-Policy'</span> <span class="attr">content</span>=<span class="string">"script-src 'self'; boject-src 'none'; style-src cdn.example.org third-party.org; child-src https:"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li><li>以上代码的配置信息：</li></ul><ul><li>脚本：只信任当前域名</li><li><object>标签，不信任任何URL，即不加载任何资源<li>样式表：只信任<code>cdn.example.org third-party.org</code></li><li>框架(frame)：必须使用<code>HTTPS</code>协议加载</li><li>其他资源：没有限制</li><li><p>资源限制选项</p><ul><li><code>script-src</code>: 外部脚本</li><li><code>style-src</code>: 样式表</li><li><code>img-src</code>: 图片 </li><li><code>media-src</code>: 媒体文件</li><li><code>font-src</code>: 字体文件</li><li><code>object-src</code>: 插件，如Flash</li><li><code>child-src</code>: 框架</li><li><code>frame-ancestors</code>: 嵌入的外部资源，如：frame、iframe</li><li><code>content-src</code>: HTTP连接（通过XHR、WebSockets）</li><li><code>worker-src</code>: worker脚本</li><li><code>manifest-src</code>: manifest文件</li></ul></li><li><p><code>default-src</code> 选项</p><ul><li>用来限制各个选项的默认值<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Security-Policy: <span class="keyword">default</span>-src <span class="string">'self'</span></span><br></pre></td></tr></tbody></table></figure></li><li>以上代码限制所有资源只能从当前域名加载</li></ul></li><li><p>参考</p><ul><li><a href="http://www.ruanyifeng.com/blog/2016/09/csp.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/09/csp.html</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP</a></li></ul></li></object></li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;Content Security Policy&lt;/code&gt; （网页安全策略或内容安全策略，简称 &lt;code&gt;CSP&lt;/code&gt;)，主要用于检测并削弱某些特定类型的攻击，如跨站脚本(&lt;code&gt;xss&lt;/code&gt;)、数据注入攻击等，相当于是让浏览器自动禁止外
      
    
    </summary>
    
    
    
      <category term="CSP" scheme="http://damao2250.github.com/tags/CSP/"/>
    
  </entry>
  
  <entry>
    <title>Github搜索技巧</title>
    <link href="http://damao2250.github.com/2020/11/12/Github%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/"/>
    <id>http://damao2250.github.com/2020/11/12/Github%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/</id>
    <published>2020-11-12T01:13:22.000Z</published>
    <updated>2020-11-12T04:45:24.903Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>搜索关键字</p><ul><li><code>Vue in:name</code> 表示在项目名称中搜索 <code>Vue</code> 关键字</li><li><code>Vue in:readme</code> 表示在项目readme中搜索 <code>Vue</code> 关键字</li><li><code>Vue in:description</code> 表示在 项目描述中搜索 <code>Vue</code> 关键字</li><li><code>Vue in:USERNAME</code> 表示在USERNAME中搜索 <code>Vue</code> 关键字</li><li><code>Vue in:ORGNAME</code> 表示在组织或机构名中搜索 <code>Vue</code> 关键字</li></ul></li><li><p>按照项目大小搜索</p></li></ol><ul><li><code>size:&gt;=5000 Vue</code> 搜索大小超过5M 的包含 <code>Vue</code> 关键字项目</li></ul><ol start="3"><li>按照Stars量搜索</li></ol><ul><li><code>stars:&gt;1000</code> 搜索Stars量大于1000的项目</li><li><code>Vue stars:&gt;1000</code> 搜索Stars量大于1000的<code>Vue</code>项目</li><li><code>language:Vue stars:&gt;10000</code>搜索开发语言为<code>Vue</code>且stars数大于10000的所有项目</li></ul><ol start="4"><li>按照语言搜索</li></ol><ul><li><code>language:Vue location:china</code> 搜索国内的开发者，语言限定为<code>Vue</code></li></ul><ol start="5"><li>Github高级搜索</li></ol><ul><li><a href="https://github.com/search/advanced" target="_blank" rel="noopener">https://github.com/search/advanced</a></li></ul><ol start="6"><li>每天/每周/每月热门</li></ol><ul><li><a href="https://github.com/trending" target="_blank" rel="noopener">https://github.com/trending</a></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;&lt;p&gt;搜索关键字&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Vue in:name&lt;/code&gt; 表示在项目名称中搜索 &lt;code&gt;Vue&lt;/code&gt; 关键字&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Vue in:readme&lt;/code&gt; 表示在项目readme中搜索 &lt;
      
    
    </summary>
    
    
    
      <category term="Github" scheme="http://damao2250.github.com/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>记录一个无聊的canvas</title>
    <link href="http://damao2250.github.com/2020/11/11/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%AA%E6%97%A0%E8%81%8A%E7%9A%84canvas/"/>
    <id>http://damao2250.github.com/2020/11/11/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%AA%E6%97%A0%E8%81%8A%E7%9A%84canvas/</id>
    <published>2020-11-11T11:25:58.000Z</published>
    <updated>2020-11-11T11:41:31.913Z</updated>
    
    <content type="html"><![CDATA[<h2 id="先看效果"><a href="#先看效果" class="headerlink" title="先看效果"></a>先看效果</h2><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/fish.png" alt="flying-fish"></p><ul><li>GIF</li></ul><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/fish.gif" alt="flying-fish-gif"></p><h2 id="代码如下"><a href="#代码如下" class="headerlink" title="代码如下"></a>代码如下</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.html --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    * {</span><br><span class="line">      margin: 0;</span><br><span class="line">      padding: 0;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-id">#jsi-flying-fish-container</span> {</span></span><br><span class="line">      width: 100%;</span><br><span class="line">      position: fixed;</span><br><span class="line">      z-index: 999;</span><br><span class="line">      bottom: 240px;</span><br><span class="line">      left: 0;</span><br><span class="line">      height: 250px;</span><br><span class="line">      max-height: 250px;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/2.2.0/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"jsi-flying-fish-container"</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">"1221"</span> <span class="attr">height</span>=<span class="string">"241"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./fish.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fish.js</span></span><br><span class="line"><span class="keyword">var</span> RENDERER = {</span><br><span class="line">POINT_INTERVAL : <span class="number">5</span>,</span><br><span class="line">FISH_COUNT : <span class="number">300</span>,</span><br><span class="line">MAX_INTERVAL_COUNT : <span class="number">50</span>,</span><br><span class="line">INIT_HEIGHT_RATE : <span class="number">0.5</span>,</span><br><span class="line">THRESHOLD : <span class="number">50</span>,</span><br><span class="line"></span><br><span class="line">init : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.setParameters();</span><br><span class="line"><span class="keyword">this</span>.reconstructMethods();</span><br><span class="line"><span class="keyword">this</span>.setup();</span><br><span class="line"><span class="keyword">this</span>.bindEvent();</span><br><span class="line"><span class="keyword">this</span>.render();</span><br><span class="line">},</span><br><span class="line">setParameters : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.$<span class="built_in">window</span> = $(<span class="built_in">window</span>);</span><br><span class="line"><span class="keyword">this</span>.$container = $(<span class="string">'#jsi-flying-fish-container'</span>);</span><br><span class="line"><span class="keyword">this</span>.$canvas = $(<span class="string">'&lt;canvas /&gt;'</span>);</span><br><span class="line"><span class="keyword">this</span>.context = <span class="keyword">this</span>.$canvas.appendTo(<span class="keyword">this</span>.$container).get(<span class="number">0</span>).getContext(<span class="string">'2d'</span>);</span><br><span class="line"><span class="keyword">this</span>.points = [];</span><br><span class="line"><span class="keyword">this</span>.fishes = [];</span><br><span class="line"><span class="keyword">this</span>.watchIds = [];</span><br><span class="line">},</span><br><span class="line">createSurfacePoints : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">var</span> count = <span class="built_in">Math</span>.round(<span class="keyword">this</span>.width / <span class="keyword">this</span>.POINT_INTERVAL);</span><br><span class="line"><span class="keyword">this</span>.pointInterval = <span class="keyword">this</span>.width / (count - <span class="number">1</span>);</span><br><span class="line"><span class="keyword">this</span>.points.push(<span class="keyword">new</span> SURFACE_POINT(<span class="keyword">this</span>, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; count; i++){</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> SURFACE_POINT(<span class="keyword">this</span>, i * <span class="keyword">this</span>.pointInterval),</span><br><span class="line">previous = <span class="keyword">this</span>.points[i - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">point.setPreviousPoint(previous);</span><br><span class="line">previous.setNextPoint(point);</span><br><span class="line"><span class="keyword">this</span>.points.push(point);</span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">reconstructMethods : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.watchWindowSize = <span class="keyword">this</span>.watchWindowSize.bind(<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>.jdugeToStopResize = <span class="keyword">this</span>.jdugeToStopResize.bind(<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>.startEpicenter = <span class="keyword">this</span>.startEpicenter.bind(<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>.moveEpicenter = <span class="keyword">this</span>.moveEpicenter.bind(<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>.reverseVertical = <span class="keyword">this</span>.reverseVertical.bind(<span class="keyword">this</span>);</span><br><span class="line"><span class="keyword">this</span>.render = <span class="keyword">this</span>.render.bind(<span class="keyword">this</span>);</span><br><span class="line">},</span><br><span class="line">setup : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.points.length = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.fishes.length = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.watchIds.length = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.intervalCount = <span class="keyword">this</span>.MAX_INTERVAL_COUNT;</span><br><span class="line"><span class="keyword">this</span>.width = <span class="keyword">this</span>.$container.width();</span><br><span class="line"><span class="keyword">this</span>.height = <span class="keyword">this</span>.$container.height();</span><br><span class="line"><span class="keyword">this</span>.fishCount = <span class="keyword">this</span>.FISH_COUNT * <span class="keyword">this</span>.width / <span class="number">500</span> * <span class="keyword">this</span>.height / <span class="number">500</span>;</span><br><span class="line"><span class="keyword">this</span>.$canvas.attr({<span class="attr">width</span> : <span class="keyword">this</span>.width, <span class="attr">height</span> : <span class="keyword">this</span>.height});</span><br><span class="line"><span class="keyword">this</span>.reverse = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.fishes.push(<span class="keyword">new</span> FISH(<span class="keyword">this</span>));</span><br><span class="line"><span class="keyword">this</span>.createSurfacePoints();</span><br><span class="line">},</span><br><span class="line">watchWindowSize : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.clearTimer();</span><br><span class="line"><span class="keyword">this</span>.tmpWidth = <span class="keyword">this</span>.$<span class="built_in">window</span>.width();</span><br><span class="line"><span class="keyword">this</span>.tmpHeight = <span class="keyword">this</span>.$<span class="built_in">window</span>.height();</span><br><span class="line"><span class="keyword">this</span>.watchIds.push(setTimeout(<span class="keyword">this</span>.jdugeToStopResize, <span class="keyword">this</span>.WATCH_INTERVAL));</span><br><span class="line">},</span><br><span class="line">clearTimer : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">this</span>.watchIds.length &gt; <span class="number">0</span>){</span><br><span class="line">clearTimeout(<span class="keyword">this</span>.watchIds.pop());</span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">jdugeToStopResize : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">var</span> width = <span class="keyword">this</span>.$<span class="built_in">window</span>.width(),</span><br><span class="line">height = <span class="keyword">this</span>.$<span class="built_in">window</span>.height(),</span><br><span class="line">stopped = (width == <span class="keyword">this</span>.tmpWidth &amp;&amp; height == <span class="keyword">this</span>.tmpHeight);</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.tmpWidth = width;</span><br><span class="line"><span class="keyword">this</span>.tmpHeight = height;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(stopped){</span><br><span class="line"><span class="keyword">this</span>.setup();</span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">bindEvent : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.$<span class="built_in">window</span>.on(<span class="string">'resize'</span>, <span class="keyword">this</span>.watchWindowSize);</span><br><span class="line"><span class="keyword">this</span>.$container.on(<span class="string">'mouseenter'</span>, <span class="keyword">this</span>.startEpicenter);</span><br><span class="line"><span class="keyword">this</span>.$container.on(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.moveEpicenter);</span><br><span class="line"><span class="keyword">this</span>.$container.on(<span class="string">'click'</span>, <span class="keyword">this</span>.reverseVertical);</span><br><span class="line">},</span><br><span class="line">getAxis : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line"><span class="keyword">var</span> offset = <span class="keyword">this</span>.$container.offset();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> {</span><br><span class="line">x : event.clientX - offset.left + <span class="keyword">this</span>.$<span class="built_in">window</span>.scrollLeft(),</span><br><span class="line">y : event.clientY - offset.top + <span class="keyword">this</span>.$<span class="built_in">window</span>.scrollTop()</span><br><span class="line">};</span><br><span class="line">},</span><br><span class="line">startEpicenter : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.axis = <span class="keyword">this</span>.getAxis(event);</span><br><span class="line">},</span><br><span class="line">moveEpicenter : <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>{</span><br><span class="line"><span class="keyword">var</span> axis = <span class="keyword">this</span>.getAxis(event);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">this</span>.axis){</span><br><span class="line"><span class="keyword">this</span>.axis = axis;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.generateEpicenter(axis.x, axis.y, axis.y - <span class="keyword">this</span>.axis.y);</span><br><span class="line"><span class="keyword">this</span>.axis = axis;</span><br><span class="line">},</span><br><span class="line">generateEpicenter : <span class="function"><span class="keyword">function</span>(<span class="params">x, y, velocity</span>)</span>{</span><br><span class="line"><span class="keyword">if</span>(y &lt; <span class="keyword">this</span>.height / <span class="number">2</span> - <span class="keyword">this</span>.THRESHOLD || y &gt; <span class="keyword">this</span>.height / <span class="number">2</span> + <span class="keyword">this</span>.THRESHOLD){</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">var</span> index = <span class="built_in">Math</span>.round(x / <span class="keyword">this</span>.pointInterval);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(index &lt; <span class="number">0</span> || index &gt;= <span class="keyword">this</span>.points.length){</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.points[index].interfere(y, velocity);</span><br><span class="line">},</span><br><span class="line">reverseVertical : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.reverse = !<span class="keyword">this</span>.reverse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, count = <span class="keyword">this</span>.fishes.length; i &lt; count; i++){</span><br><span class="line"><span class="keyword">this</span>.fishes[i].reverseVertical();</span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">controlStatus : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, count = <span class="keyword">this</span>.points.length; i &lt; count; i++){</span><br><span class="line"><span class="keyword">this</span>.points[i].updateSelf();</span><br><span class="line">}</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, count = <span class="keyword">this</span>.points.length; i &lt; count; i++){</span><br><span class="line"><span class="keyword">this</span>.points[i].updateNeighbors();</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.fishes.length &lt; <span class="keyword">this</span>.fishCount){</span><br><span class="line"><span class="keyword">if</span>(--<span class="keyword">this</span>.intervalCount == <span class="number">0</span>){</span><br><span class="line"><span class="keyword">this</span>.intervalCount = <span class="keyword">this</span>.MAX_INTERVAL_COUNT;</span><br><span class="line"><span class="keyword">this</span>.fishes.push(<span class="keyword">new</span> FISH(<span class="keyword">this</span>));</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">render : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">requestAnimationFrame(<span class="keyword">this</span>.render);</span><br><span class="line"><span class="keyword">this</span>.controlStatus();</span><br><span class="line"><span class="keyword">this</span>.context.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">this</span>.width, <span class="keyword">this</span>.height);</span><br><span class="line"><span class="keyword">this</span>.context.fillStyle = <span class="string">'#0184b2'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, count = <span class="keyword">this</span>.fishes.length; i &lt; count; i++){</span><br><span class="line"><span class="keyword">this</span>.fishes[i].render(<span class="keyword">this</span>.context);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.context.save();</span><br><span class="line"><span class="keyword">this</span>.context.globalCompositeOperation = <span class="string">'xor'</span>;</span><br><span class="line"><span class="keyword">this</span>.context.beginPath();</span><br><span class="line"><span class="keyword">this</span>.context.moveTo(<span class="number">0</span>, <span class="keyword">this</span>.reverse ? <span class="number">0</span> : <span class="keyword">this</span>.height);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>, count = <span class="keyword">this</span>.points.length; i &lt; count; i++){</span><br><span class="line"><span class="keyword">this</span>.points[i].render(<span class="keyword">this</span>.context);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.context.lineTo(<span class="keyword">this</span>.width, <span class="keyword">this</span>.reverse ? <span class="number">0</span> : <span class="keyword">this</span>.height);</span><br><span class="line"><span class="keyword">this</span>.context.closePath();</span><br><span class="line"><span class="keyword">this</span>.context.fill();</span><br><span class="line"><span class="keyword">this</span>.context.restore();</span><br><span class="line">}</span><br><span class="line">};</span><br><span class="line"><span class="keyword">var</span> SURFACE_POINT = <span class="function"><span class="keyword">function</span>(<span class="params">renderer, x</span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.renderer = renderer;</span><br><span class="line"><span class="keyword">this</span>.x = x;</span><br><span class="line"><span class="keyword">this</span>.init();</span><br><span class="line">};</span><br><span class="line">SURFACE_POINT.prototype = {</span><br><span class="line">SPRING_CONSTANT : <span class="number">0.03</span>,</span><br><span class="line">SPRING_FRICTION : <span class="number">0.9</span>,</span><br><span class="line">WAVE_SPREAD : <span class="number">0.3</span>,</span><br><span class="line">ACCELARATION_RATE : <span class="number">0.01</span>,</span><br><span class="line"></span><br><span class="line">init : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.initHeight = <span class="keyword">this</span>.renderer.height * <span class="keyword">this</span>.renderer.INIT_HEIGHT_RATE;</span><br><span class="line"><span class="keyword">this</span>.height = <span class="keyword">this</span>.initHeight;</span><br><span class="line"><span class="keyword">this</span>.fy = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.force = {<span class="attr">previous</span> : <span class="number">0</span>, <span class="attr">next</span> : <span class="number">0</span>};</span><br><span class="line">},</span><br><span class="line">setPreviousPoint : <span class="function"><span class="keyword">function</span>(<span class="params">previous</span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.previous = previous;</span><br><span class="line">},</span><br><span class="line">setNextPoint : <span class="function"><span class="keyword">function</span>(<span class="params">next</span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.next = next;</span><br><span class="line">},</span><br><span class="line">interfere : <span class="function"><span class="keyword">function</span>(<span class="params">y, velocity</span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.fy = <span class="keyword">this</span>.renderer.height * <span class="keyword">this</span>.ACCELARATION_RATE * ((<span class="keyword">this</span>.renderer.height - <span class="keyword">this</span>.height - y) &gt;= <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">1</span>) * <span class="built_in">Math</span>.abs(velocity);</span><br><span class="line">},</span><br><span class="line">updateSelf : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.fy += <span class="keyword">this</span>.SPRING_CONSTANT * (<span class="keyword">this</span>.initHeight - <span class="keyword">this</span>.height);</span><br><span class="line"><span class="keyword">this</span>.fy *= <span class="keyword">this</span>.SPRING_FRICTION;</span><br><span class="line"><span class="keyword">this</span>.height += <span class="keyword">this</span>.fy;</span><br><span class="line">},</span><br><span class="line">updateNeighbors : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.previous){</span><br><span class="line"><span class="keyword">this</span>.force.previous = <span class="keyword">this</span>.WAVE_SPREAD * (<span class="keyword">this</span>.height - <span class="keyword">this</span>.previous.height);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.next){</span><br><span class="line"><span class="keyword">this</span>.force.next = <span class="keyword">this</span>.WAVE_SPREAD * (<span class="keyword">this</span>.height - <span class="keyword">this</span>.next.height);</span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">render : <span class="function"><span class="keyword">function</span>(<span class="params">context</span>)</span>{</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.previous){</span><br><span class="line"><span class="keyword">this</span>.previous.height += <span class="keyword">this</span>.force.previous;</span><br><span class="line"><span class="keyword">this</span>.previous.fy += <span class="keyword">this</span>.force.previous;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.next){</span><br><span class="line"><span class="keyword">this</span>.next.height += <span class="keyword">this</span>.force.next;</span><br><span class="line"><span class="keyword">this</span>.next.fy += <span class="keyword">this</span>.force.next;</span><br><span class="line">}</span><br><span class="line">context.lineTo(<span class="keyword">this</span>.x, <span class="keyword">this</span>.renderer.height - <span class="keyword">this</span>.height);</span><br><span class="line">}</span><br><span class="line">};</span><br><span class="line"><span class="keyword">var</span> FISH = <span class="function"><span class="keyword">function</span>(<span class="params">renderer</span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.renderer = renderer;</span><br><span class="line"><span class="keyword">this</span>.init();</span><br><span class="line">};</span><br><span class="line">FISH.prototype = {</span><br><span class="line">GRAVITY : <span class="number">0.4</span>,</span><br><span class="line"></span><br><span class="line">init : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.direction = <span class="built_in">Math</span>.random() &lt; <span class="number">0.5</span>;</span><br><span class="line"><span class="keyword">this</span>.x = <span class="keyword">this</span>.direction ? (<span class="keyword">this</span>.renderer.width + <span class="keyword">this</span>.renderer.THRESHOLD) : -<span class="keyword">this</span>.renderer.THRESHOLD;</span><br><span class="line"><span class="keyword">this</span>.previousY = <span class="keyword">this</span>.y;</span><br><span class="line"><span class="keyword">this</span>.vx = <span class="keyword">this</span>.getRandomValue(<span class="number">4</span>, <span class="number">10</span>) * (<span class="keyword">this</span>.direction ? <span class="number">-1</span> : <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.renderer.reverse){</span><br><span class="line"><span class="keyword">this</span>.y = <span class="keyword">this</span>.getRandomValue(<span class="keyword">this</span>.renderer.height * <span class="number">1</span> / <span class="number">10</span>, <span class="keyword">this</span>.renderer.height * <span class="number">4</span> / <span class="number">10</span>);</span><br><span class="line"><span class="keyword">this</span>.vy = <span class="keyword">this</span>.getRandomValue(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">this</span>.ay = <span class="keyword">this</span>.getRandomValue(<span class="number">0.05</span>, <span class="number">0.2</span>);</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">this</span>.y = <span class="keyword">this</span>.getRandomValue(<span class="keyword">this</span>.renderer.height * <span class="number">6</span> / <span class="number">10</span>, <span class="keyword">this</span>.renderer.height * <span class="number">9</span> / <span class="number">10</span>);</span><br><span class="line"><span class="keyword">this</span>.vy = <span class="keyword">this</span>.getRandomValue(<span class="number">-5</span>, <span class="number">-2</span>);</span><br><span class="line"><span class="keyword">this</span>.ay = <span class="keyword">this</span>.getRandomValue(<span class="number">-0.2</span>, <span class="number">-0.05</span>);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.isOut = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">this</span>.theta = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.phi = <span class="number">0</span>;</span><br><span class="line">},</span><br><span class="line">getRandomValue : <span class="function"><span class="keyword">function</span>(<span class="params">min, max</span>)</span>{</span><br><span class="line"><span class="keyword">return</span> min + (max - min) * <span class="built_in">Math</span>.random();</span><br><span class="line">},</span><br><span class="line">reverseVertical : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.isOut = !<span class="keyword">this</span>.isOut;</span><br><span class="line"><span class="keyword">this</span>.ay *= <span class="number">-1</span>;</span><br><span class="line">},</span><br><span class="line">controlStatus : <span class="function"><span class="keyword">function</span>(<span class="params">context</span>)</span>{</span><br><span class="line"><span class="keyword">this</span>.previousY = <span class="keyword">this</span>.y;</span><br><span class="line"><span class="keyword">this</span>.x += <span class="keyword">this</span>.vx;</span><br><span class="line"><span class="keyword">this</span>.y += <span class="keyword">this</span>.vy;</span><br><span class="line"><span class="keyword">this</span>.vy += <span class="keyword">this</span>.ay;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.renderer.reverse){</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.y &gt; <span class="keyword">this</span>.renderer.height * <span class="keyword">this</span>.renderer.INIT_HEIGHT_RATE){</span><br><span class="line"><span class="keyword">this</span>.vy -= <span class="keyword">this</span>.GRAVITY;</span><br><span class="line"><span class="keyword">this</span>.isOut = <span class="literal">true</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.isOut){</span><br><span class="line"><span class="keyword">this</span>.ay = <span class="keyword">this</span>.getRandomValue(<span class="number">0.05</span>, <span class="number">0.2</span>);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.isOut = <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.y &lt; <span class="keyword">this</span>.renderer.height * <span class="keyword">this</span>.renderer.INIT_HEIGHT_RATE){</span><br><span class="line"><span class="keyword">this</span>.vy += <span class="keyword">this</span>.GRAVITY;</span><br><span class="line"><span class="keyword">this</span>.isOut = <span class="literal">true</span>;</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.isOut){</span><br><span class="line"><span class="keyword">this</span>.ay = <span class="keyword">this</span>.getRandomValue(<span class="number">-0.2</span>, <span class="number">-0.05</span>);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.isOut = <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">this</span>.isOut){</span><br><span class="line"><span class="keyword">this</span>.theta += <span class="built_in">Math</span>.PI / <span class="number">20</span>;</span><br><span class="line"><span class="keyword">this</span>.theta %= <span class="built_in">Math</span>.PI * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">this</span>.phi += <span class="built_in">Math</span>.PI / <span class="number">30</span>;</span><br><span class="line"><span class="keyword">this</span>.phi %= <span class="built_in">Math</span>.PI * <span class="number">2</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">this</span>.renderer.generateEpicenter(<span class="keyword">this</span>.x + (<span class="keyword">this</span>.direction ? <span class="number">-1</span> : <span class="number">1</span>) * <span class="keyword">this</span>.renderer.THRESHOLD, <span class="keyword">this</span>.y, <span class="keyword">this</span>.y - <span class="keyword">this</span>.previousY);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.vx &gt; <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.x &gt; <span class="keyword">this</span>.renderer.width + <span class="keyword">this</span>.renderer.THRESHOLD || <span class="keyword">this</span>.vx &lt; <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.x &lt; -<span class="keyword">this</span>.renderer.THRESHOLD){</span><br><span class="line"><span class="keyword">this</span>.init();</span><br><span class="line">}</span><br><span class="line">},</span><br><span class="line">render : <span class="function"><span class="keyword">function</span>(<span class="params">context</span>)</span>{</span><br><span class="line">context.save();</span><br><span class="line">context.translate(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line">context.rotate(<span class="built_in">Math</span>.PI + <span class="built_in">Math</span>.atan2(<span class="keyword">this</span>.vy, <span class="keyword">this</span>.vx));</span><br><span class="line">context.scale(<span class="number">1</span>, <span class="keyword">this</span>.direction ? <span class="number">1</span> : <span class="number">-1</span>);</span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">-30</span>, <span class="number">0</span>);</span><br><span class="line">context.bezierCurveTo(<span class="number">-20</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">10</span>, <span class="number">40</span>, <span class="number">0</span>);</span><br><span class="line">context.bezierCurveTo(<span class="number">15</span>, <span class="number">-10</span>, <span class="number">-20</span>, <span class="number">-15</span>, <span class="number">-30</span>, <span class="number">0</span>);</span><br><span class="line">context.fill();</span><br><span class="line"></span><br><span class="line">context.save();</span><br><span class="line">context.translate(<span class="number">40</span>, <span class="number">0</span>);</span><br><span class="line">context.scale(<span class="number">0.9</span> + <span class="number">0.2</span> * <span class="built_in">Math</span>.sin(<span class="keyword">this</span>.theta), <span class="number">1</span>);</span><br><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">context.quadraticCurveTo(<span class="number">5</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">8</span>);</span><br><span class="line">context.quadraticCurveTo(<span class="number">12</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line">context.quadraticCurveTo(<span class="number">12</span>, <span class="number">-5</span>, <span class="number">20</span>, <span class="number">-8</span>);</span><br><span class="line">context.quadraticCurveTo(<span class="number">5</span>, <span class="number">-10</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">context.fill();</span><br><span class="line">context.restore();</span><br><span class="line"></span><br><span class="line">context.save();</span><br><span class="line">context.translate(<span class="number">-3</span>, <span class="number">0</span>);</span><br><span class="line">context.rotate((<span class="built_in">Math</span>.PI / <span class="number">3</span> + <span class="built_in">Math</span>.PI / <span class="number">10</span> * <span class="built_in">Math</span>.sin(<span class="keyword">this</span>.phi)) * (<span class="keyword">this</span>.renderer.reverse ? <span class="number">-1</span> : <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">context.beginPath();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>.renderer.reverse){</span><br><span class="line">context.moveTo(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">context.bezierCurveTo(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">30</span>, <span class="number">0</span>, <span class="number">40</span>);</span><br><span class="line">context.bezierCurveTo(<span class="number">-12</span>, <span class="number">25</span>, <span class="number">-8</span>, <span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">}<span class="keyword">else</span>{</span><br><span class="line">context.moveTo(<span class="number">-5</span>, <span class="number">0</span>);</span><br><span class="line">context.bezierCurveTo(<span class="number">-10</span>, <span class="number">-10</span>, <span class="number">-10</span>, <span class="number">-30</span>, <span class="number">0</span>, <span class="number">-40</span>);</span><br><span class="line">context.bezierCurveTo(<span class="number">12</span>, <span class="number">-25</span>, <span class="number">8</span>, <span class="number">-10</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">}</span><br><span class="line">context.closePath();</span><br><span class="line">context.fill();</span><br><span class="line">context.restore();</span><br><span class="line">context.restore();</span><br><span class="line"><span class="keyword">this</span>.controlStatus(context);</span><br><span class="line">}</span><br><span class="line">};</span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">RENDERER.init();</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;先看效果&quot;&gt;&lt;a href=&quot;#先看效果&quot; class=&quot;headerlink&quot; title=&quot;先看效果&quot;&gt;&lt;/a&gt;先看效果&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Damao2250/FileTran
      
    
    </summary>
    
    
    
      <category term="canvas" scheme="http://damao2250.github.com/tags/canvas/"/>
    
  </entry>
  
  <entry>
    <title>基于Element-Ui的select二次封装的下拉搜索组件</title>
    <link href="http://damao2250.github.com/2020/11/09/%E5%9F%BA%E4%BA%8EElement-Ui%E7%9A%84select%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85%E7%9A%84%E4%B8%8B%E6%8B%89%E6%90%9C%E7%B4%A2%E7%BB%84%E4%BB%B6/"/>
    <id>http://damao2250.github.com/2020/11/09/%E5%9F%BA%E4%BA%8EElement-Ui%E7%9A%84select%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85%E7%9A%84%E4%B8%8B%E6%8B%89%E6%90%9C%E7%B4%A2%E7%BB%84%E4%BB%B6/</id>
    <published>2020-11-09T02:51:56.000Z</published>
    <updated>2020-11-09T03:02:34.110Z</updated>
    
    <content type="html"><![CDATA[<h2 id="少了罗嗦，直接看代码"><a href="#少了罗嗦，直接看代码" class="headerlink" title="少了罗嗦，直接看代码"></a>少了罗嗦，直接看代码</h2><ul><li>注意代码不能直接使用，只是提供一种封装思路，其中 <code>dSearchList</code> 及样式需要自己重新写, <code>dCountryList</code> 来自 <code>dropListMixin</code> </li><li>还有很多方法并未加进来，可根据实际自行添加</li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// select/index.vue</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&nbsp;&nbsp;&lt;div&gt;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-select</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:value=<span class="string">"value"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:placeholder=<span class="string">"placeholder"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterable</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:style=<span class="string">"customStyle"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:<span class="class"><span class="keyword">class</span></span>=<span class="string">"customClass"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remote</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:size=<span class="string">"size"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:remote-method=<span class="string">"dSearchList('countryList')"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:loading=<span class="string">"dLoading"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearable</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@input=<span class="string">"onChange($event)"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@change=<span class="string">"(val)&nbsp;=&gt;&nbsp;onSelectChange(val)"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&gt;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;el-option</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v-<span class="keyword">for</span>=<span class="string">"item&nbsp;in&nbsp;dCountryList"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key=<span class="string">"item[optionKey]"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:label=<span class="string">"item[optionLabel]"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:value=<span class="string">"item[optionValue]"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;<span class="class"><span class="keyword">class</span></span>=<span class="string">"d-f&nbsp;f-jc-sb"</span>&gt;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;item.code&nbsp;||&nbsp;<span class="string">""</span>&nbsp;}}&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;item.name&nbsp;||&nbsp;""&nbsp;}}&lt;/</span>span&gt;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;span&gt;{{&nbsp;item.numCode&nbsp;||&nbsp;<span class="string">""</span>&nbsp;}}&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/</span>div&gt;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="regexp">/el-option&gt;</span></span><br><span class="line"><span class="regexp">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/</span>el-select&gt;</span><br><span class="line">&nbsp;&nbsp;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span>&nbsp;{&nbsp;dropListMixin&nbsp;}&nbsp;<span class="keyword">from</span>&nbsp;<span class="string">"@/mixins/drop_list_mixin"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span>&nbsp;<span class="keyword">default</span>&nbsp;{</span><br><span class="line">&nbsp;&nbsp;mixins:&nbsp;[dropListMixin],</span><br><span class="line">&nbsp;&nbsp;props:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;value:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">""</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;placeholder:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">"请输入"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;customStyle:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">"width:&nbsp;100%;"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;customClass:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">""</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;clearable:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">Boolean</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="literal">true</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;size:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">"small"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;optionKey:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">"code"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;optionLabel:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">"name"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;optionValue:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="built_in">String</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:&nbsp;<span class="string">"code"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;data()&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;{}</span><br><span class="line">&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;created()&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.dInit([<span class="string">"countryList"</span>]);</span><br><span class="line">&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;methods:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;onChange(val)&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.$emit(<span class="string">"input"</span>,&nbsp;val);</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;onSelectChange(val)&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.$emit(<span class="string">"selectChange"</span>,&nbsp;val);</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;},</span><br><span class="line">};</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ &nbsp;&nbsp;使用示例&nbsp;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&nbsp;&nbsp;&lt;country-select&nbsp;:size="medium"&nbsp;v-model="formData.countryCode"&nbsp;@selectChange="val&nbsp;=&gt;&nbsp;onCountrySelect(val,'countryCode')"&nbsp;&gt;&lt;/</span>country-select&gt;&nbsp;</span><br><span class="line"></span><br><span class="line"><span class="comment">// &nbsp;&nbsp;使用示例</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;少了罗嗦，直接看代码&quot;&gt;&lt;a href=&quot;#少了罗嗦，直接看代码&quot; class=&quot;headerlink&quot; title=&quot;少了罗嗦，直接看代码&quot;&gt;&lt;/a&gt;少了罗嗦，直接看代码&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;注意代码不能直接使用，只是提供一种封装思路，其中 &lt;code&gt;d
      
    
    </summary>
    
    
    
      <category term="Element-ui" scheme="http://damao2250.github.com/tags/Element-ui/"/>
    
  </entry>
  
  <entry>
    <title>关于js中对小数的计算</title>
    <link href="http://damao2250.github.com/2020/10/03/%E5%85%B3%E4%BA%8Ejs%E4%B8%AD%E5%AF%B9%E5%B0%8F%E6%95%B0%E7%9A%84%E8%AE%A1%E7%AE%97/"/>
    <id>http://damao2250.github.com/2020/10/03/%E5%85%B3%E4%BA%8Ejs%E4%B8%AD%E5%AF%B9%E5%B0%8F%E6%95%B0%E7%9A%84%E8%AE%A1%E7%AE%97/</id>
    <published>2020-10-03T13:12:01.000Z</published>
    <updated>2020-10-03T13:34:30.286Z</updated>
    
    <content type="html"><![CDATA[<p>在js的小数计算中，<code>0.1+0.2=0.30000000000000004</code></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num1 = <span class="number">0.1</span>;</span><br><span class="line"><span class="keyword">let</span> num2 = <span class="number">0.2</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( num1 + num2 );</span><br><span class="line"><span class="comment">// 0.30000000000000004</span></span><br></pre></td></tr></tbody></table></figure><p>为什么出现这样的结果，我们把小数转换成计算机能读得懂的二进制就比较明了了</p><p>0.1 -&gt; 0.1.toString(2) -&gt; 0.0001100110011001100110011001100110011001100110011001101(无限循环…)<br>0.2 -&gt; 0.1.toString(2) -&gt; 0.001100110011001100110011001100110011001100110011001101(无限循环…)</p><p>双精度浮点数的小数部分最多支持 52 位，所以两者相加之后得到这么一串 0.0100110011001100110011001100110011001100110011001100 因浮点数小数位的限制而截断的二进制数字，这时候，我们再把它转换为十进制，就成了 0.30000000000000004。</p><p>所以我们该如何处理此类问题？</p><p>为了避免产生精度差异，我们要把需要计算的数字乘以 10 的 n 次幂，换算成计算机能够精确识别的整数，然后再除以 10 的 n 次幂，大部分编程语言都是这样处理精度差异的，我们就借用过来处理一下 JS 中的浮点数精度误差。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">formatNum = <span class="function"><span class="keyword">function</span>(<span class="params"> num, digit </span>) </span>{</span><br><span class="line">  <span class="keyword">let</span> m = <span class="built_in">Math</span>.pow( <span class="number">10</span>, digit );</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>( num * m, <span class="number">10</span> ) / m;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">let</span> num1 = <span class="number">0.1</span>;</span><br><span class="line"><span class="keyword">let</span> num2 = <span class="number">0.2</span>;</span><br><span class="line"><span class="built_in">console</span>.log( num1 + num2 );</span><br><span class="line"><span class="built_in">console</span>.log( formatNum( num1 + num2, <span class="number">1</span>) );</span><br></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Tips:</span></span><br><span class="line"><span class="comment">// pow() 方法可返回 x 的 y 次幂的值。</span></span><br><span class="line"><span class="comment">// parseInt() 函数可解析一个字符串，并返回一个整数。（第二个参数取值2-36，省略该参数或其值为 0，则数字将以 10 为基础来解析。如果它以 “0x” 或 “0X” 开头，将以 16 为基数。）</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在js的小数计算中，&lt;code&gt;0.1+0.2=0.30000000000000004&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class
      
    
    </summary>
    
    
    
      <category term="JS" scheme="http://damao2250.github.com/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>使用SVG实现边框特效及绘制图形</title>
    <link href="http://damao2250.github.com/2020/06/16/%E4%BD%BF%E7%94%A8SVG%E5%AE%9E%E7%8E%B0%E8%BE%B9%E6%A1%86%E7%89%B9%E6%95%88%E5%8F%8A%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2/"/>
    <id>http://damao2250.github.com/2020/06/16/%E4%BD%BF%E7%94%A8SVG%E5%AE%9E%E7%8E%B0%E8%BE%B9%E6%A1%86%E7%89%B9%E6%95%88%E5%8F%8A%E7%BB%98%E5%88%B6%E5%9B%BE%E5%BD%A2/</id>
    <published>2020-06-16T06:58:41.000Z</published>
    <updated>2020-06-16T07:21:24.040Z</updated>
    
    <content type="html"><![CDATA[<h2 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h2><ul><li>SVG 指可伸缩矢量图形 (Scalable Vector Graphics)</li><li>SVG 用来定义用于网络的基于矢量的图形</li><li>SVG 使用 XML 格式定义图形</li><li>SVG 图像在放大或改变尺寸的情况下其图形质量不会有所损失</li><li>SVG 是万维网联盟的标准</li><li>SVG 与诸如 DOM 和 XSL 之类的 W3C 标准是一个整体</li></ul><h3 id="SVG绘制矩形和圆角矩形–"><a href="#SVG绘制矩形和圆角矩形–" class="headerlink" title="SVG绘制矩形和圆角矩形–"></a>SVG绘制矩形和圆角矩形–<rect></rect></h3><ul><li>rect:绘制矩形标签;</li><li>x:矩形的左侧位置,定义矩形到<code>&lt;svg&gt;</code>左侧的距离是Xpx;</li><li>y:矩形的顶端位置,定义矩形到<code>&lt;svg&gt;</code>顶部的距离是Ypx;</li><li>rx/ry:是圆角半径;</li><li>style:</li><li>fill:填充颜色;</li><li>fill-opacity:填充颜色透明度;</li><li>stroke:描边颜色;</li><li>stroke-Width:描边宽度;</li><li>stroke-opacity:描边透明度;</li></ul><h3 id="SVG绘制椭圆–"><a href="#SVG绘制椭圆–" class="headerlink" title="SVG绘制椭圆–"></a>SVG绘制椭圆–<ellipse></ellipse></h3><ul><li>ellipse:绘制椭圆标签;</li><li>cx:定义椭圆中心的X坐标;</li><li>cy:定义椭圆中心的Y坐标;</li><li>rx:定义椭圆的水平半径;</li><li>ry:定义椭圆的垂直半径;</li></ul><h3 id="SVG绘制直线–"><a href="#SVG绘制直线–" class="headerlink" title="SVG绘制直线–"></a>SVG绘制直线–<line></line></h3><ul><li>line:绘制直线标签;</li><li>x1:直线起始点X坐标;</li><li>y1:直线起始点Y坐标;</li><li>x2:直线终止点X坐标;</li><li>y2:直线终止点Y坐标;</li></ul><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><style>    .svg-content{      padding: 20px;      height: 100%;      display: flex;      justify-content: center;      align-items: center;      background: #696969;    }    .svg-main {      width: 200px;    }    svg {      width: 200px;      height: 50px;      margin-bottom: 20px;      background: #444;      cursor: default;    }    rect#shape {      fill: transparent;      stroke: white;      stroke-width: 6px;      stroke-dasharray: 0 500;      stroke-dashoffset: 0;      transition: 0.5s ease;    }    svg:hover #shape {      stroke-dasharray: 500 0;      stroke-width: 6px;      stroke: rgb(32, 213, 226);    }    @keyframes dong {      100% {        stroke-dasharray: 500 0;        stroke-width: 6px;        stroke: white;      }    }    rect#one {      fill: transparent;      stroke: yellowgreen;      stroke-width: 6px;      stroke-dasharray: 0 500;      stroke-dashoffset: 250;      animation: dong1 2s ease-in-out infinite alternate;    }    @keyframes dong1 {      100% {        stroke-dasharray: 500 0;        stroke-width: 6px;        stroke: greenyellow;      }    }    rect#two {      fill: transparent;      stroke: rgb(233, 43, 43);      stroke-width: 6px;      stroke-dasharray: 200 300;      stroke-dashoffset: 250;      animation: dong2 2s ease-in-out infinite alternate;    }    @keyframes dong2 {      100% {        stroke-dasharray: 200 0;        stroke-width: 6px;        stroke: rgb(233, 43, 43);      }    }    rect#three {      fill: transparent;      stroke: rgb(233, 220, 43);      stroke-width: 6px;      stroke-dasharray: 50 450;      stroke-dashoffset: 50;      animation: dong3 2s ease-in-out infinite alternate;    }    rect#threes {      fill: transparent;      stroke: rgb(233, 103, 43);      stroke-width: 6px;      stroke-dasharray: 50 450;      stroke-dashoffset: -200;      animation: dong3 2s ease-in-out infinite alternate;    }    @keyframes dong3 {      100% {        stroke-dasharray: 500 0;        stroke-width: 6px;        stroke: rgb(233, 220, 43);      }    }    rect#four {      fill: transparent;      stroke: skyblue;      stroke-width: 6px;      stroke-dasharray: 50 450;      stroke-dashoffset: 150;      transition: 0.5s ease;    }    svg:hover #four {      stroke-dasharray: 250 250;    }    rect#fours {      fill: transparent;      stroke: blue;      stroke-width: 6px;      stroke-dasharray: 50 450;      stroke-dashoffset: 200;      transition: 0.5s ease;    }    svg:hover #fours {      stroke-dasharray: 250 50;    }    text {      fill: white;      font-size: 30px;      transition: 0.5s linear;    }    svg:hover text {      fill: rgb(30, 129, 223);    }    svg:hover .four {      fill: rgb(231, 105, 21);    }    #five {      fill: transparent;      stroke: rgb(255, 0, 179);      stroke-width: 6px;      stroke-dasharray: 50 400;      stroke-dashoffset: -75;      stroke-opacity: 0;      animation: dong5 1s linear infinite alternate;    }    @keyframes dong5 {      100% {        stroke-opacity: 1;        stroke: rgb(192, 44, 180);        stroke-dasharray: 50 20;      }    }    #six {      fill: transparent;      stroke: rgb(0, 255, 21);      stroke-width: 6px;      stroke-dasharray: 50 400;      stroke-dashoffset: 50;      animation: dong6 1s linear infinite alternate;    }    @keyframes dong6 {      100% {        stroke: rgb(231, 250, 59);        stroke-dasharray: 20 1;      }    }    rect#svg-border {      fill: transparent;      stroke: white;      stroke-width: 6px;      stroke-dasharray: 0, 200, 0, 50, 0, 200, 0, 50;      stroke-dashoffset: 0;      transition: all .3s ease;    }    svg:hover #svg-border {      stroke-dasharray: 200, 0, 50, 0, 200, 0, 50, 0;      stroke-width: 6px;      stroke: #58bc58;    }  </style><div class="svg-content">  <main class="svg-main">    <svg>      <rect id="shape" height="50" width="200"></rect>      <text x="70" y="35"><a href="###">百度</a></text>    </svg>    <svg>      <rect id="one" height="50" width="200"></rect>    </svg>    <svg>      <rect id="two" height="50" width="200"></rect>    </svg>    <svg>      <rect id="three" height="50" width="200"></rect>      <rect id="threes" height="50" width="200"></rect>    </svg>    <svg>      <rect id="fours" height="50" width="200"></rect>      <rect id="four" height="50" width="200"></rect>      <text class="four" x="70" y="35"><a href="###">淘宝</a></text>    </svg>    <svg>      <rect id="five" height="50" width="200"></rect>    </svg>    <svg>      <rect id="six" height="50" width="200"></rect>    </svg>    <svg>      <rect id="svg-border" height="50" width="200"></rect>      <text x="55" y="35"><a href="###">四边框</a></text>    </svg>    <svg>      <circle cx="100" cy="25" r="20" stroke="orange" stroke-width="6" fill="#ff5"></circle>    </svg>    <svg>      <rect x="25" y="10" width="150" height="30" style="fill:#ccc; stroke:orange; stroke-width:5px;"></rect>    </svg>    <svg>      <rect x="25" y="10" rx="15" ry="15" width="150" height="30" style="fill:#ccc; stroke:orange; stroke-width:5px; stroke-opacity:.5; fill-opacity:.9;"></rect>    </svg>    <svg>       <line x1="5" y1="5" x2="190" y2="40" style="stroke:rgba(255, 0, 0, .5); stroke-width:5px;"></line>     </svg>    <svg>       <ellipse cx="100" cy="25" rx="50" ry="15" stroke="orange" stroke-width="5" fill="#000" fill-opacity=".5"></ellipse>     </svg>  </main></div><h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    body,</span><br><span class="line">    html {</span><br><span class="line">      height: 100%;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      align-items: center;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#696969</span>;</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    main {</span><br><span class="line">      width: 200px;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    svg {</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 50px;</span><br><span class="line">      margin-bottom: 20px;</span><br><span class="line"><span class="css">      <span class="selector-tag">background</span>: <span class="selector-id">#444</span>;</span></span><br><span class="line"></span><br><span class="line">      cursor: default;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#shape</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: white;</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 0 500;</span><br><span class="line">      stroke-dashoffset: 0;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: 0<span class="selector-class">.5s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line">      /* animation:dong 2s ease-in-out infinite alternate;</span><br><span class="line">*/</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">svg</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#shape</span> {</span></span><br><span class="line">      stroke-dasharray: 500 0;</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke: rgb(32, 213, 226);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke-dasharray: 500 0;</span><br><span class="line">        stroke-width: 6px;</span><br><span class="line">        /* stroke-dashoffset:-250;</span><br><span class="line">*/</span><br><span class="line">        stroke: white;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#one</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: yellowgreen;</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 0 500;</span><br><span class="line">      stroke-dashoffset: 250;</span><br><span class="line">      animation: dong1 2s ease-in-out infinite alternate;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong1 {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke-dasharray: 500 0;</span><br><span class="line">        stroke-width: 6px;</span><br><span class="line">        /* stroke-dashoffset:0;</span><br><span class="line">*/</span><br><span class="line">        stroke: greenyellow;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#two</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: rgb(233, 43, 43);</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 200 300;</span><br><span class="line">      stroke-dashoffset: 250;</span><br><span class="line">      animation: dong2 2s ease-in-out infinite alternate;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong2 {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke-dasharray: 200 0;</span><br><span class="line">        stroke-width: 6px;</span><br><span class="line">        /* stroke-dashoffset:0;</span><br><span class="line">*/</span><br><span class="line">        stroke: rgb(233, 43, 43);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#three</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: rgb(233, 220, 43);</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 50 450;</span><br><span class="line">      stroke-dashoffset: 50;</span><br><span class="line">      animation: dong3 2s ease-in-out infinite alternate;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#threes</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: rgb(233, 103, 43);</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 50 450;</span><br><span class="line">      stroke-dashoffset: -200;</span><br><span class="line">      animation: dong3 2s ease-in-out infinite alternate;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong3 {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke-dasharray: 500 0;</span><br><span class="line">        stroke-width: 6px;</span><br><span class="line">        /* stroke-dashoffset:-250;</span><br><span class="line">*/</span><br><span class="line">        stroke: rgb(233, 220, 43);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#four</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: skyblue;</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 50 450;</span><br><span class="line">      stroke-dashoffset: 150;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: 0<span class="selector-class">.5s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line">      /* animation:dong4 2s ease infinite alternate;</span><br><span class="line">*/</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">svg</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#four</span> {</span></span><br><span class="line">      stroke-dasharray: 250 250;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#fours</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: blue;</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 50 450;</span><br><span class="line">      stroke-dashoffset: 200;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: 0<span class="selector-class">.5s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line">      /* animation:dong4s 2s ease infinite alternate;</span><br><span class="line">*/</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">svg</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#fours</span> {</span></span><br><span class="line">      stroke-dasharray: 250 50;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong4 {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke-dasharray: 250 250;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong4s {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke-dasharray: 250 50;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    text {</span><br><span class="line">      fill: white;</span><br><span class="line">      font-size: 30px;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: 0<span class="selector-class">.5s</span> <span class="selector-tag">linear</span>;</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">svg</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">text</span> {</span></span><br><span class="line">      fill: rgb(30, 129, 223);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">svg</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.four</span> {</span></span><br><span class="line">      fill: rgb(231, 105, 21);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-id">#five</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: rgb(255, 0, 179);</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 50 400;</span><br><span class="line">      stroke-dashoffset: -75;</span><br><span class="line">      stroke-opacity: 0;</span><br><span class="line">      animation: dong5 1s linear infinite alternate;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong5 {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke-opacity: 1;</span><br><span class="line">        stroke: rgb(192, 44, 180);</span><br><span class="line">        stroke-dasharray: 50 20;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-id">#six</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: rgb(0, 255, 21);</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 50 400;</span><br><span class="line">      stroke-dashoffset: 50;</span><br><span class="line">      animation: dong6 1s linear infinite alternate;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    @<span class="keyword">keyframes</span> dong6 {</span></span><br><span class="line">      100% {</span><br><span class="line">        stroke: rgb(231, 250, 59);</span><br><span class="line">        stroke-dasharray: 20 1;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">rect</span><span class="selector-id">#svg-border</span> {</span></span><br><span class="line">      fill: transparent;</span><br><span class="line">      stroke: white;</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line">      stroke-dasharray: 0, 200, 0, 50, 0, 200, 0, 50;</span><br><span class="line">      stroke-dashoffset: 0;</span><br><span class="line"><span class="css">      <span class="selector-tag">transition</span>: <span class="selector-tag">all</span> <span class="selector-class">.3s</span> <span class="selector-tag">ease</span>;</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">svg</span><span class="selector-pseudo">:hover</span> <span class="selector-id">#svg-border</span> {</span></span><br><span class="line">      stroke-dasharray: 200, 0, 50, 0, 200, 0, 50, 0;</span><br><span class="line">      stroke-width: 6px;</span><br><span class="line"><span class="css">      <span class="selector-tag">stroke</span>: <span class="selector-id">#58bc58</span>;</span></span><br><span class="line">    }</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"shape"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">"70"</span> <span class="attr">y</span>=<span class="string">"35"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"one"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"two"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"three"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"threes"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"fours"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"four"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"four"</span> <span class="attr">x</span>=<span class="string">"70"</span> <span class="attr">y</span>=<span class="string">"35"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span>&gt;</span>淘宝<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"five"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"six"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">id</span>=<span class="string">"svg-border"</span> <span class="attr">height</span>=<span class="string">"50"</span> <span class="attr">width</span>=<span class="string">"200"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">"55"</span> <span class="attr">y</span>=<span class="string">"35"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span>&gt;</span>四边框<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">"100"</span> <span class="attr">cy</span>=<span class="string">"25"</span> <span class="attr">r</span>=<span class="string">"20"</span> <span class="attr">stroke</span>=<span class="string">"orange"</span> <span class="attr">stroke-width</span>=<span class="string">"6"</span> <span class="attr">fill</span>=<span class="string">"#ff5"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">x</span>=<span class="string">"25"</span> <span class="attr">y</span>=<span class="string">"10"</span> <span class="attr">width</span>=<span class="string">"150"</span> <span class="attr">height</span>=<span class="string">"30"</span> <span class="attr">style</span>=<span class="string">"fill:#ccc; stroke:orange; stroke-width:5px;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">x</span>=<span class="string">"25"</span> <span class="attr">y</span>=<span class="string">"10"</span> <span class="attr">rx</span>=<span class="string">"15"</span> <span class="attr">ry</span>=<span class="string">"15"</span> <span class="attr">width</span>=<span class="string">"150"</span> <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">"fill:#ccc; stroke:orange; stroke-width:5px; stroke-opacity:.5; fill-opacity:.9;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span> &gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">"5"</span> <span class="attr">y1</span>=<span class="string">"5"</span> <span class="attr">x2</span>=<span class="string">"190"</span> <span class="attr">y2</span>=<span class="string">"40"</span> <span class="attr">style</span>=<span class="string">"stroke:rgba(255, 0, 0, .5); stroke-width:5px;"</span> /&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">svg</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">cx</span>=<span class="string">"100"</span> <span class="attr">cy</span>=<span class="string">"25"</span> <span class="attr">rx</span>=<span class="string">"50"</span> <span class="attr">ry</span>=<span class="string">"15"</span> <span class="attr">stroke</span>=<span class="string">"orange"</span> <span class="attr">stroke-width</span>=<span class="string">"5"</span> <span class="attr">fill</span>=<span class="string">"#000"</span> <span class="attr">fill-opacity</span>=<span class="string">".5"</span> /&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;SVG&quot;&gt;&lt;a href=&quot;#SVG&quot; class=&quot;headerlink&quot; title=&quot;SVG&quot;&gt;&lt;/a&gt;SVG&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;SVG 指可伸缩矢量图形 (Scalable Vector Graphics)&lt;/li&gt;
&lt;li&gt;SVG 用来定义用于网
      
    
    </summary>
    
    
    
      <category term="SVG" scheme="http://damao2250.github.com/tags/SVG/"/>
    
  </entry>
  
  <entry>
    <title>用Element-Ui封装一个滑动组件</title>
    <link href="http://damao2250.github.com/2020/06/06/%E7%94%A8Element-Ui%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E6%BB%91%E5%8A%A8%E7%BB%84%E4%BB%B6/"/>
    <id>http://damao2250.github.com/2020/06/06/%E7%94%A8Element-Ui%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E6%BB%91%E5%8A%A8%E7%BB%84%E4%BB%B6/</id>
    <published>2020-06-06T03:37:00.000Z</published>
    <updated>2020-06-07T05:17:31.305Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基于Element-Ui的“Slider滑块”组件封装一个前端滑动滑动验证组件"><a href="#基于Element-Ui的“Slider滑块”组件封装一个前端滑动滑动验证组件" class="headerlink" title="基于Element-Ui的“Slider滑块”组件封装一个前端滑动滑动验证组件"></a>基于Element-Ui的“Slider滑块”组件封装一个前端滑动滑动验证组件</h2><ul><li>主要用于登录验证</li><li>纯前端验证（滑着过瘾）目前无法与后端进行校验</li><li>封装还可以优化</li><li>直接看代码吧</li></ul><h3 id="slider组件"><a href="#slider组件" class="headerlink" title="slider组件"></a>slider组件</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// slider/index.vue'</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"bar"</span> ref=<span class="string">"bar"</span>&gt;</span><br><span class="line">    &lt;el-slider</span><br><span class="line">      <span class="class"><span class="keyword">class</span></span>=<span class="string">"slider"</span></span><br><span class="line">      ref=<span class="string">"slider"</span></span><br><span class="line">      v-model=<span class="string">"value"</span></span><br><span class="line">      :show-tooltip=<span class="string">"false"</span></span><br><span class="line">      @change=<span class="string">"sliderChange"</span></span><br><span class="line">      :disabled=<span class="string">"sliderDisabled"</span></span><br><span class="line">    &gt;<span class="xml"><span class="tag">&lt;/<span class="name">el-slider</span>&gt;</span></span></span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"slider-text-before"</span> ref=<span class="string">"barText"</span>&gt;</span><br><span class="line">      &lt;div :<span class="class"><span class="keyword">class</span></span>=<span class="string">"noReset?'run run-no-slider':'run'"</span> v-<span class="keyword">if</span>=<span class="string">"!isSuccess"</span>&gt;拖动滑块验证&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;span v-else style="color:#fff;"&gt;验证通过&lt;/</span>span&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">export default {</span></span><br><span class="line"><span class="regexp">  name: "slider",</span></span><br><span class="line"><span class="regexp">  props: {</span></span><br><span class="line"><span class="regexp">    reset: {</span></span><br><span class="line"><span class="regexp">      type: Boolean,</span></span><br><span class="line"><span class="regexp">      default: false</span></span><br><span class="line"><span class="regexp">    },</span></span><br><span class="line"><span class="regexp">    noReset: {</span></span><br><span class="line"><span class="regexp">      type: Boolean,</span></span><br><span class="line"><span class="regexp">      default: false,</span></span><br><span class="line"><span class="regexp">    }</span></span><br><span class="line"><span class="regexp">  },</span></span><br><span class="line"><span class="regexp">  data() {</span></span><br><span class="line"><span class="regexp">    return {</span></span><br><span class="line"><span class="regexp">      value: 0,</span></span><br><span class="line"><span class="regexp">      isSuccess: false,</span></span><br><span class="line"><span class="regexp">      sliderDisabled: false</span></span><br><span class="line"><span class="regexp">    };</span></span><br><span class="line"><span class="regexp">  },</span></span><br><span class="line"><span class="regexp">  watch: {</span></span><br><span class="line"><span class="regexp">    reset: function(val) {</span></span><br><span class="line"><span class="regexp">      if (val) {</span></span><br><span class="line"><span class="regexp">        this.sliderReset();</span></span><br><span class="line"><span class="regexp">      }</span></span><br><span class="line"><span class="regexp">    },</span></span><br><span class="line"><span class="regexp">    noReset(val){</span></span><br><span class="line"><span class="regexp">      if(val){</span></span><br><span class="line"><span class="regexp">        this.$refs.bar.classList.add("no-slider")</span></span><br><span class="line"><span class="regexp">      }else{</span></span><br><span class="line"><span class="regexp">        this.$refs.bar.classList.remove("no-slider")</span></span><br><span class="line"><span class="regexp">      }</span></span><br><span class="line"><span class="regexp">    },</span></span><br><span class="line"><span class="regexp">    value(val){</span></span><br><span class="line"><span class="regexp">      this.$emit("value",val)</span></span><br><span class="line"><span class="regexp">    }</span></span><br><span class="line"><span class="regexp">  },</span></span><br><span class="line"><span class="regexp">  created() {</span></span><br><span class="line"><span class="regexp">    },</span></span><br><span class="line"><span class="regexp">  mounted() {</span></span><br><span class="line"><span class="regexp">    console.log(this.$refs.slider.$refs.button1.$refs.button)</span></span><br><span class="line"><span class="regexp">    </span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ this.$refs.slider.$refs.button1.$refs.button.style = ""</span></span><br><span class="line"><span class="regexp">    this.$refs.slider.$refs.button1.$refs.button.lastChild.innerHTML =</span></span><br><span class="line"><span class="regexp">      "&lt;i class='el-icon-d-arrow-right icon-arrow-right'&gt;&lt;/i</span>&gt;<span class="string">";</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">  },</span></span><br><span class="line"><span class="string">  methods: {</span></span><br><span class="line"><span class="string">    sliderChange(val) {</span></span><br><span class="line"><span class="string">      if (val === 100) {</span></span><br><span class="line"><span class="string">        this.sliderSucceed();</span></span><br><span class="line"><span class="string">      } else {</span></span><br><span class="line"><span class="string">        this.sliderReset();</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    },</span></span><br><span class="line"><span class="string">    sliderSucceed() {</span></span><br><span class="line"><span class="string">      this.isSuccess = true;</span></span><br><span class="line"><span class="string">      this.$refs.slider.$refs.button1.$refs.button.lastChild.innerHTML =</span></span><br><span class="line"><span class="string">        "</span>&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">'el-icon-success icon-success'</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="string">";</span></span><br><span class="line"><span class="string">      this.sliderDisabled = true;</span></span><br><span class="line"><span class="string">      this.$emit("</span>success<span class="string">", true);</span></span><br><span class="line"><span class="string">    },</span></span><br><span class="line"><span class="string">    sliderReset() {</span></span><br><span class="line"><span class="string">      this.isSuccess = false;</span></span><br><span class="line"><span class="string">      this.value = 0;</span></span><br><span class="line"><span class="string">      this.sliderDisabled = false;</span></span><br><span class="line"><span class="string">      this.$emit("</span>update:reset<span class="string">", false);</span></span><br><span class="line"><span class="string">      this.$refs.slider.$refs.button1.$refs.button.lastChild.innerHTML =</span></span><br><span class="line"><span class="string">        "</span>&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">'el-icon-d-arrow-right icon-arrow-right'</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><span class="string">";</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">};</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;style lang="</span>scss<span class="string">" scoped&gt;</span></span><br><span class="line"><span class="string">$color: #67c23a;</span></span><br><span class="line"><span class="string">// $color: #409EFF;</span></span><br><span class="line"><span class="string">$slider_button_width: 60px;</span></span><br><span class="line"><span class="string">$slider_button_height: 40px;</span></span><br><span class="line"><span class="string">.bar {</span></span><br><span class="line"><span class="string">  position: relative;</span></span><br><span class="line"><span class="string">  width: 100%;</span></span><br><span class="line"><span class="string">  background-color: #e4e7ed;</span></span><br><span class="line"><span class="string">  border-radius: 3px;</span></span><br><span class="line"><span class="string">  .slider-text-before {</span></span><br><span class="line"><span class="string">    position: absolute;</span></span><br><span class="line"><span class="string">    left: 50%;</span></span><br><span class="line"><span class="string">    top: 50%;</span></span><br><span class="line"><span class="string">    transform: translate(-50%, -50%);</span></span><br><span class="line"><span class="string">    font-size: 16px;</span></span><br><span class="line"><span class="string">    letter-spacing: 2px;</span></span><br><span class="line"><span class="string">    user-select: none;</span></span><br><span class="line"><span class="string">    .run {</span></span><br><span class="line"><span class="string">      padding: 0 30px;</span></span><br><span class="line"><span class="string">      color: transparent;</span></span><br><span class="line"><span class="string">      -moz-user-select: none;</span></span><br><span class="line"><span class="string">      -webkit-user-select: none;</span></span><br><span class="line"><span class="string">      user-select: none;</span></span><br><span class="line"><span class="string">      -o-user-select: none;</span></span><br><span class="line"><span class="string">      -ms-user-select: none;</span></span><br><span class="line"><span class="string">      background: -webkit-gradient(</span></span><br><span class="line"><span class="string">        linear,</span></span><br><span class="line"><span class="string">        left top,</span></span><br><span class="line"><span class="string">        right top,</span></span><br><span class="line"><span class="string">        color-stop(0, #333),</span></span><br><span class="line"><span class="string">        color-stop(0.3, #333),</span></span><br><span class="line"><span class="string">        color-stop(0.5, #fff),</span></span><br><span class="line"><span class="string">        color-stop(0.7, #333),</span></span><br><span class="line"><span class="string">        color-stop(1, #333)</span></span><br><span class="line"><span class="string">      );</span></span><br><span class="line"><span class="string">      -webkit-background-clip: text;</span></span><br><span class="line"><span class="string">      -webkit-text-fill-color: transparent;</span></span><br><span class="line"><span class="string">      -webkit-text-size-adjust: none;</span></span><br><span class="line"><span class="string">      -webkit-animation: slidetounlock 3s infinite;</span></span><br><span class="line"><span class="string">      animation: slidetounlock 3s infinite;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    .run-no-slider{</span></span><br><span class="line"><span class="string">      background: -webkit-gradient(</span></span><br><span class="line"><span class="string">        linear,</span></span><br><span class="line"><span class="string">        left top,</span></span><br><span class="line"><span class="string">        right top,</span></span><br><span class="line"><span class="string">        color-stop(0, #F56C6C),</span></span><br><span class="line"><span class="string">        color-stop(0.3, #F56C6C),</span></span><br><span class="line"><span class="string">        color-stop(0.5, #fff),</span></span><br><span class="line"><span class="string">        color-stop(0.7, #F56C6C),</span></span><br><span class="line"><span class="string">        color-stop(1, #F56C6C)</span></span><br><span class="line"><span class="string">      );</span></span><br><span class="line"><span class="string">      -webkit-background-clip: text;</span></span><br><span class="line"><span class="string">      -webkit-text-fill-color: transparent;</span></span><br><span class="line"><span class="string">      -webkit-text-size-adjust: none;</span></span><br><span class="line"><span class="string">      -webkit-animation: slidetounlock 3s infinite;</span></span><br><span class="line"><span class="string">      animation: slidetounlock 3s infinite;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">  .slider-text-after {</span></span><br><span class="line"><span class="string">    position: absolute;</span></span><br><span class="line"><span class="string">    left: 50%;</span></span><br><span class="line"><span class="string">    top: 50%;</span></span><br><span class="line"><span class="string">    transform: translate(-50%, -50%);</span></span><br><span class="line"><span class="string">    z-index: 10;</span></span><br><span class="line"><span class="string">    color: #fff;</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">  .slider {</span></span><br><span class="line"><span class="string">    width: calc(100% - #{$slider_button_width});</span></span><br><span class="line"><span class="string">    /deep/.el-slider__runway {</span></span><br><span class="line"><span class="string">      margin: 0;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.el-slider__bar {</span></span><br><span class="line"><span class="string">      height: 40px;</span></span><br><span class="line"><span class="string">      background-color: $color;</span></span><br><span class="line"><span class="string">      border-top-left-radius: 0px;</span></span><br><span class="line"><span class="string">      border-bottom-left-radius: 0px;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.el-slider__runway {</span></span><br><span class="line"><span class="string">      height: 40px;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.el-slider__button-wrapper {</span></span><br><span class="line"><span class="string">      top: 0;</span></span><br><span class="line"><span class="string">      width: $slider_button_width;</span></span><br><span class="line"><span class="string">      height: 40px;</span></span><br><span class="line"><span class="string">      margin-left: ($slider_button_width/2);</span></span><br><span class="line"><span class="string">      :hover {</span></span><br><span class="line"><span class="string">        transform: none;</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.el-slider__button {</span></span><br><span class="line"><span class="string">      width: $slider_button_width;</span></span><br><span class="line"><span class="string">      height: 40px;</span></span><br><span class="line"><span class="string">      border-radius: 0;</span></span><br><span class="line"><span class="string">      border-color: #dcdfe6;</span></span><br><span class="line"><span class="string">      :hover {</span></span><br><span class="line"><span class="string">        transform: none;</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.el-slider__button.dragging,</span></span><br><span class="line"><span class="string">    .el-slider__button.hover,</span></span><br><span class="line"><span class="string">    .el-slider__button:hover {</span></span><br><span class="line"><span class="string">      -webkit-transform: none !important;</span></span><br><span class="line"><span class="string">      transform: none !important;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.el-slider__runway.disabled .el-slider__button:hover {</span></span><br><span class="line"><span class="string">      cursor: grab !important;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.icon-arrow-right {</span></span><br><span class="line"><span class="string">      line-height: ($slider_button_height - 4px);</span></span><br><span class="line"><span class="string">      font-size: 18px;</span></span><br><span class="line"><span class="string">      color: #4c4c4c;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">    /deep/.icon-success {</span></span><br><span class="line"><span class="string">      line-height: ($slider_button_height - 4px);</span></span><br><span class="line"><span class="string">      font-size: 20px;</span></span><br><span class="line"><span class="string">      color: $color;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">@-webkit-keyframes slidetounlock {</span></span><br><span class="line"><span class="string">  from {</span></span><br><span class="line"><span class="string">    background-position: -70px 100%;</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">  to {</span></span><br><span class="line"><span class="string">    background-position: 80px 0;</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">.no-slider{</span></span><br><span class="line"><span class="string">  animation: shake 800ms ease-in-out;</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@keyframes shake {</span></span><br><span class="line"><span class="string">    10%, 90% { transform: translate3d(-1px, 0, 0); }</span></span><br><span class="line"><span class="string">    20%, 80% { transform: translate3d(+2px, 0, 0); }</span></span><br><span class="line"><span class="string">    30%, 70% { transform: translate3d(-4px, 0, 0); }</span></span><br><span class="line"><span class="string">    40%, 60% { transform: translate3d(+4px, 0, 0); }</span></span><br><span class="line"><span class="string">    50% { transform: translate3d(-4px, 0, 0); }</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> slider <span class="keyword">from</span> <span class="string">'./slider'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"> &lt;slider v-bind:reset.sync=<span class="string">"isResetSlider"</span> :noReset=<span class="string">"isNoReset"</span> @value=<span class="string">"sliderValue"</span> @success=<span class="string">"sliderSuccess"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">slider</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">components:{</span><br><span class="line">  slider</span><br><span class="line">},</span><br><span class="line">data() {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    isResetSlider: <span class="literal">false</span>,</span><br><span class="line">    isSeccess: <span class="literal">false</span>,</span><br><span class="line">    sliderVal: <span class="string">""</span>,</span><br><span class="line">    isNoReset: <span class="literal">false</span></span><br><span class="line">  };</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">methods: {</span><br><span class="line">  <span class="comment">// 滑动验证</span></span><br><span class="line">  sliderSuccess(val){</span><br><span class="line">    <span class="keyword">this</span>.isSeccess = val</span><br><span class="line">  },</span><br><span class="line">  sliderValue(val){</span><br><span class="line">    <span class="keyword">this</span>.sliderVal = val</span><br><span class="line">  },</span><br><span class="line">  submitForm() {</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.sliderVal == <span class="number">0</span>){</span><br><span class="line">      <span class="keyword">this</span>.isNoReset = <span class="literal">true</span></span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">        <span class="keyword">this</span>.isNoReset = <span class="literal">false</span></span><br><span class="line">      }, <span class="number">900</span>);</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.isSeccess){</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"submit"</span>);</span><br><span class="line">      <span class="keyword">this</span>.isResetSlider = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">this</span>.isSeccess = <span class="literal">false</span></span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"请滑动滑块验证"</span>);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="效果截图"><a href="#效果截图" class="headerlink" title="效果截图"></a>效果截图</h3><ul><li><p>滑动验证-未滑动</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81-%E6%9C%AA%E6%BB%91%E5%8A%A8.jpg" alt="滑动验证-未滑动"></p></li><li><p>滑动验证-滑动中</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81-%E6%BB%91%E5%8A%A8%E4%B8%AD.jpg" alt="滑动验证-滑动中"></p></li><li><p>滑动验证-滑动成功</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81-%E6%BB%91%E5%8A%A8%E6%88%90%E5%8A%9F.jpg" alt="滑动验证-滑动成功"></p></li><li><p>滑动验证GIF</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/%E6%BB%91%E5%8A%A8%E9%AA%8C%E8%AF%81-DIF.gif" alt="滑动验证GIF"></p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;基于Element-Ui的“Slider滑块”组件封装一个前端滑动滑动验证组件&quot;&gt;&lt;a href=&quot;#基于Element-Ui的“Slider滑块”组件封装一个前端滑动滑动验证组件&quot; class=&quot;headerlink&quot; title=&quot;基于Element-Ui的“
      
    
    </summary>
    
    
    
      <category term="Element-ui" scheme="http://damao2250.github.com/tags/Element-ui/"/>
    
  </entry>
  
  <entry>
    <title>Vue简介</title>
    <link href="http://damao2250.github.com/2020/05/19/Vue%E7%AE%80%E4%BB%8B/"/>
    <id>http://damao2250.github.com/2020/05/19/Vue%E7%AE%80%E4%BB%8B/</id>
    <published>2020-05-19T00:36:20.000Z</published>
    <updated>2020-05-21T09:53:53.886Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Vue是什么？"><a href="#Vue是什么？" class="headerlink" title="Vue是什么？"></a>Vue是什么？</h2><ul><li><code>Vue</code> (读音 <code>/vjuː/</code>，类似于 <code>view</code>) 是一套用于构建用户界面的渐进式框架。<ul><li>渐进式：声明式渲染 -&gt; 组件系统 -&gt; 客户端路由 -&gt; 大规模状态管理 -&gt; 构建工具</li><li><details>  <summary>声明式渲染 与 响应式触发</summary>  <p>使用模板语法  声明式地将数据渲染进DOM，叫声明式渲染。即DOM状态只是数据状态的一个映射。</p>  <p>如果属性的状态值发生了变化，无须做任何操作，与dom绑定的属性会自动发生改变，叫属性的响应式触发。</p></details></li><li>组件系统：将一个大型的界面切分成一个一个更小的可控单元，具有可复用性。</li><li>客户端路由：针对单页应用而言，需要有路由让一个URL对应到一个应用的状态。</li><li>状态管理：大型项目设计涉及多个组件之间的数据共享</li><li>构建工具：Vue官方提供了一个构建工具vue-cli，可以快速安装webPack、loader等等包</li></ul></li><li><code>Vue</code>是前端三大框架之一</li><li><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/Vue%E6%B8%90%E8%BF%9B%E5%BC%8F%E6%A1%86%E6%9E%B6.jpeg" alt="渐进式框架"></li></ul><h2 id="Vue的发展历程"><a href="#Vue的发展历程" class="headerlink" title="Vue的发展历程"></a>Vue的发展历程</h2><ul><li>实验阶段（2013 年中到 2014 年 2 月）</li><li>0.x 阶段 (2014 年 2 月到 2015 年 10 月)</li><li>1.x 阶段 (2015 年 10 月到 2016 年 9 月) 发行版名称 [Evangelion]</li><li>2.x 阶段 (2016 年 9 月至今) 发行版名称 [Ghost in the Shell]</li></ul><h2 id="MVVM模式"><a href="#MVVM模式" class="headerlink" title="MVVM模式"></a>MVVM模式</h2><ul><li><code>MVVM</code>主要把每个页面分成了M（Model）、V（View）、VM（ViewModel）。<code>VM</code>是其中核心，M和V间的调度者。</li><li><code>M</code>: 保存的是每个页面中单独的数据保存在<code>data</code>里。</li><li><code>V</code>: 每个页面的html结构。</li><li><code>VM</code>，一个调度者，分割了M和V，M和V通过中间的<code>VM</code>关联。V想要保存数据到M，都要有<code>VM</code>做中间处理；V想要渲染页面，需要调用<code>VM</code>，<code>VM</code>从M中取数据。</li><li>前端中使用<code>MVVM</code>思想，主要让开发更方便，<code>MVVM</code>提供了数据的双向绑定（由<code>VM</code>提供）。<br><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/1589862758(1).jpg" alt=""></li></ul><h2 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h2><ul><li>Vue双向数据绑定是通过<code>数据劫持</code>结合<code>发布订阅模式</code>的方式来实现的，也就是说数据和视图同步，数据发生变化，视图跟着变化，视图变化，数据也随之发生改变；</li><li>核心：关于VUE双向数据绑定，其核心是 <code>Object.defineProperty()</code>方法；</li><li>把一个普通的 JavaScript 对象传入 Vue 实例作为 data 选项，Vue 将遍历此对象所有的 property，并使用 <code>Object.defineProperty</code> 把这些 <code>property</code> 全部转为 <code>getter/setter</code>。</li><li>实现数据双向数据绑定<ul><li>1、实现一个数据监听器Observer，能够对数据对象的所有属性进行监听，如有变动可拿到最新值并通知订阅者</li><li>2、实现一个指令解析器Compile，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数</li><li>3、实现一个Watcher，作为连接Observer和Compile的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图</li></ul></li></ul><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = {}</span><br><span class="line"><span class="built_in">Object</span>.defineProperty( obj, <span class="string">"greet"</span>, {</span><br><span class="line">  <span class="keyword">get</span>: function() {</span><br><span class="line">    <span class="built_in">console</span>.log( <span class="string">"调用 get 方法"</span> )</span><br><span class="line">  },</span><br><span class="line">  <span class="keyword">set</span>: function( newVal ) {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"调用 set 方法，传入的值是："</span> + newVal );</span><br><span class="line">    obj.say = newVal;</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line">obj.greet; <span class="comment">// 调用 get 方法</span></span><br><span class="line">obj.greet = <span class="string">"hello"</span>; <span class="comment">// 调用 set 方法，传入的值是：hello</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// {say: "hello"}</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/Object.defineProperty.png" alt="数据双向绑定"><br><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/Object.defineProperty1.jpg" alt=""><br><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/Object.defineProperty2.jpg" alt=""></p><h2 id="Vue生命周期"><a href="#Vue生命周期" class="headerlink" title="Vue生命周期"></a>Vue生命周期</h2><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/lifecycle.png" alt="Vue生命周期"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Vue是什么？&quot;&gt;&lt;a href=&quot;#Vue是什么？&quot; class=&quot;headerlink&quot; title=&quot;Vue是什么？&quot;&gt;&lt;/a&gt;Vue是什么？&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Vue&lt;/code&gt; (读音 &lt;code&gt;/vjuː/&lt;/code&gt;，类似于
      
    
    </summary>
    
    
    
      <category term="Vue" scheme="http://damao2250.github.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>01-React-Native-Windows之起步</title>
    <link href="http://damao2250.github.com/2020/05/14/01-React-Native-Windows%E4%B9%8B%E8%B5%B7%E6%AD%A5/"/>
    <id>http://damao2250.github.com/2020/05/14/01-React-Native-Windows%E4%B9%8B%E8%B5%B7%E6%AD%A5/</id>
    <published>2020-05-14T11:53:55.000Z</published>
    <updated>2020-05-15T06:02:49.961Z</updated>
    
    <content type="html"><![CDATA[<h1 id="React-Native-for-Windows-0-61-起步"><a href="#React-Native-for-Windows-0-61-起步" class="headerlink" title="React Native for Windows 0.61 起步"></a>React Native for Windows 0.61 起步</h1><h2 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h2><ul><li>Windows 10</li></ul><h2 id="开发依赖"><a href="#开发依赖" class="headerlink" title="开发依赖"></a>开发依赖</h2><ul><li>安装  <a href="https://www.visualstudio.com/downloads" target="_blank" rel="noopener">Visual Studio 2019</a></li><li>安装 <code>Visual Studio 2019</code> 的这些选项<ul><li>工作负载 -&gt; 通用 Windows 平台开发 -&gt; 勾选可选项里的 “C++ (v141)通用 Windows 平台工具”</li><li>工作负载 -&gt; 使用 C++ 的桌面开发 </li><li>单个组件 -&gt; 编译器、生成工具和运行时 -&gt; MSVC v141 – VS 2017 C++ x64/x86 生成工具(v14.16)</li><li>单个组件 -&gt; 编译器、生成工具和运行时 -&gt; MSVC v141 – VS 2017 C++ ARM64 生成工具(v14.16)</li><li>单个组件 -&gt; 开发活动 -&gt; Node.js 开发工具</li><li>预计安装所需空间大小：21.64GB</li></ul></li></ul><h2 id="安装-React-Native-的开发依赖"><a href="#安装-React-Native-的开发依赖" class="headerlink" title="安装 React Native 的开发依赖"></a>安装 React Native 的开发依赖</h2><ul><li>安装标准的 <a href="https://reactnative.dev/docs/getting-started#node-python2-jdk" target="_blank" rel="noopener">React Native</a> 开发依赖，<a href="https://reactnative.cn/docs/getting-started" target="_blank" rel="noopener">中文文档</a></li><li>安装 <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">node.js</a>，确保node的版本是12.9.1或是更高，12.9.1是构建 React Native for Windows 推荐的版本</li><li>安装 <a href="https://www.google.com/chrome/" target="_blank" rel="noopener">Chrome</a>，用于调式JS,可选</li><li>安装 <a href="https://yarnpkg.com/en/docs/install" target="_blank" rel="noopener">Yarn</a>，可选安装，如果你想为 <a href="https://github.com/microsoft/react-native-windows" target="_blank" rel="noopener">react-native-windows</a> 添砖加瓦则续安装</li></ul><h2 id="故障排除"><a href="#故障排除" class="headerlink" title="故障排除"></a>故障排除</h2><ul><li>如果在运行应用程序后，打包程序未更新或应用程序未显示 <code>React Native</code> 内容-请关闭打包程序命令提示符窗口，并确保该应用程序已打开，然后运行 <code>yarn start</code> 并再次从 <code>Visual Studio</code> 运行该应用程序。</li><li>如果您在UWP应用程序窗口中看到带有错误消息：的红色错误框，请 <code>ERROR: Instance failed to start. A connection with the server cannot be established</code> 确保您正在使用打包 <code>yarn start</code> 程序运行，然后再次运行该应用程序。</li></ul><h2 id="安装-React-Native-for-Windows"><a href="#安装-React-Native-for-Windows" class="headerlink" title="安装 React Native for Windows"></a>安装 React Native for Windows</h2><ul><li>在需要创建项目的目录下面执行 <code>react-native init</code><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npx react-native init &lt;project name&gt; --version ^<span class="number">0.61</span><span class="number">.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// npx 还能避免全局安装的模块,安装模块时会下载到一个临时目录，使用以后再删除</span></span><br><span class="line"><span class="comment">// --version ^0.61.5 指定版本号</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="安装-Windows-扩展"><a href="#安装-Windows-扩展" class="headerlink" title="安装 Windows 扩展"></a>安装 Windows 扩展</h2><ul><li>安装 React Native for Windows 软件包<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd &lt;project name&gt; </span><br><span class="line">npx react-native-windows-init --overwrite</span><br><span class="line"></span><br><span class="line"><span class="comment">// 切换到创建项目的目录下面然后安装</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="运行-React-Native-Windows-应用"><a href="#运行-React-Native-Windows-应用" class="headerlink" title="运行 React Native Windows 应用"></a>运行 React Native Windows 应用</h2><ul><li>运行前确保浏览器已经打开</li><li>在 VS Code 中运行<ul><li>安装 VS Code 插件： <code>React Native Tools</code></li><li>在应用程根目录创建文件 <code>.vscode/launch.json</code>，并粘贴如下内容<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">  <span class="string">"configurations"</span>: [</span><br><span class="line">      {</span><br><span class="line">          <span class="string">"name"</span>: <span class="string">"Debug Windows"</span>,</span><br><span class="line">          <span class="string">"cwd"</span>: <span class="string">"${workspaceFolder}"</span>,</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"reactnative"</span>,</span><br><span class="line">          <span class="string">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">          <span class="string">"platform"</span>: <span class="string">"windows"</span></span><br><span class="line">      }</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>运行项目<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx react-native run-windows</span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一次启动会有点慢，安装后会淡出一个命令提示符窗口，请按回车以继续</span></span><br></pre></td></tr></tbody></table></figure></li><li>按 “r” 键可以重载应用</li></ul></li></ul><ul><li>在 Visual Studio 中运行<ul><li>在 Visual Studio 中打开解决方案文件（如：”\windowsAppDemo\windows\windowsAppDemo.sln”）</li><li>如果 Visual Studio 显示无法加载，可以关闭 Visual Studio 然后重新打开</li><li>在项目目录项目下打开<code>命令行提示符</code>运行<code>yarn start</code></li><li>在 Visual Studio 中的菜单下面选 Debug -&gt; x64 -&gt; 本地计算机（点击绿色三角按钮启动）</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/welcome-react-native-for-windows.png" alt="应用运行成功截图"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;React-Native-for-Windows-0-61-起步&quot;&gt;&lt;a href=&quot;#React-Native-for-Windows-0-61-起步&quot; class=&quot;headerlink&quot; title=&quot;React Native for Windows 0.6
      
    
    </summary>
    
    
    
      <category term="React Native for Windows" scheme="http://damao2250.github.com/tags/React-Native-for-Windows/"/>
    
  </entry>
  
  <entry>
    <title>抽象组件实现节流/防抖</title>
    <link href="http://damao2250.github.com/2020/05/04/%E6%8A%BD%E8%B1%A1%E7%BB%84%E4%BB%B6/"/>
    <id>http://damao2250.github.com/2020/05/04/%E6%8A%BD%E8%B1%A1%E7%BB%84%E4%BB%B6/</id>
    <published>2020-05-04T00:09:25.000Z</published>
    <updated>2020-05-14T06:02:06.755Z</updated>
    
    <content type="html"><![CDATA[<h2 id="节流-防抖"><a href="#节流-防抖" class="headerlink" title="节流/防抖"></a>节流/防抖</h2><ul><li>1、节流：<ul><li>一个函数执行一行后，只有大于设定的执行周期后才会被执行第二次(点击事件)</li><li>有个需要频繁触发的函数，出于优化性能角度，在规定时间内，只让函数触发的第一次生效后面不生效</li></ul></li><li><ol start="2"><li>防抖：</li></ol><ul><li>一个需要频繁触发的函数，在规定时间内，只让最后一次生效，前面不生效</li></ul></li></ul><h2 id="Vue实现函数防抖组件"><a href="#Vue实现函数防抖组件" class="headerlink" title="Vue实现函数防抖组件"></a>Vue实现函数防抖组件</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 组件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> throttle = <span class="function"><span class="keyword">function</span> (<span class="params">fn, wait = <span class="number">50</span>, isDebounce, ctx</span>) </span>{</span><br><span class="line">  <span class="keyword">let</span> timer</span><br><span class="line">  <span class="keyword">let</span> lastCall = <span class="number">0</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...params</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (isDebounce) {</span><br><span class="line">      <span class="keyword">if</span> (timer) clearTimeout(timer)</span><br><span class="line">      timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> {</span><br><span class="line">        fn.apply(ctx, params)</span><br><span class="line">      }, wait);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">      <span class="keyword">if</span> (now - lastCall &lt; wait) <span class="keyword">return</span></span><br><span class="line">      lastCall = now</span><br><span class="line">      fn.apply(ctx, params)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  name: <span class="string">"Throttle"</span>,</span><br><span class="line">  abstract: <span class="literal">true</span>,</span><br><span class="line">  props: {</span><br><span class="line">    time: <span class="built_in">Number</span>,</span><br><span class="line">    events: <span class="built_in">String</span>,</span><br><span class="line">    isDebounce: {</span><br><span class="line">      type: <span class="built_in">Boolean</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  created() {</span><br><span class="line">    <span class="keyword">this</span>.eventKeys = <span class="keyword">this</span>.events.split(<span class="string">","</span>)</span><br><span class="line">    <span class="keyword">this</span>.originMap = {}</span><br><span class="line">    <span class="keyword">this</span>.throttledMap = {}</span><br><span class="line">  },</span><br><span class="line">  render() {</span><br><span class="line">    <span class="keyword">const</span> vnode = <span class="keyword">this</span>.$slots.default[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">this</span>.eventKeys.forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">const</span> target = vnode.data.on[key]</span><br><span class="line">      <span class="keyword">if</span> (target === <span class="keyword">this</span>.originMap[key] &amp;&amp; <span class="keyword">this</span>.throttledMap[key]) {</span><br><span class="line">        vnode.data.on[key] = <span class="keyword">this</span>.throttledMap[key]</span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> (target) {</span><br><span class="line">        <span class="keyword">this</span>.originMap[key] = target</span><br><span class="line">        <span class="keyword">this</span>.throttledMap[key] = throttle(target, <span class="keyword">this</span>.time, <span class="keyword">this</span>.isDebounce, vnode)</span><br><span class="line">        vnode.data.on[key] = <span class="keyword">this</span>.throttledMap[key]</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line">    <span class="keyword">return</span> vnode</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过第三个参数 isDebounce来控制切换防抖节流</span></span><br><span class="line"><span class="comment">// 在 main.js 引入</span></span><br><span class="line"><span class="keyword">import</span> Throttle <span class="keyword">from</span> <span class="string">"./Throttle"</span></span><br><span class="line">Vue.component(<span class="string">"Throttle"</span>, Throttle)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">  &lt;Throttle :timer=<span class="string">"1000"</span> events=<span class="string">"click"</span>&gt;</span><br><span class="line">    &lt;botton @click=<span class="string">"onClick($event, 1)"</span>&gt;click + <span class="number">1</span> {{val}}&lt;<span class="regexp">/botton&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>Throttle&gt;</span><br><span class="line">  &lt;Throttle :timer=<span class="string">"1000"</span> events=<span class="string">"click"</span> :isDebounce=<span class="string">"true"</span>&gt;</span><br><span class="line">    &lt;botton @click=<span class="string">"onAdd"</span>&gt;click + <span class="number">3</span> {{val}}&lt;<span class="regexp">/botton&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>Throttle&gt;</span><br><span class="line">  &lt;Throttle :timer=<span class="string">"3300"</span> events=<span class="string">"mouseleave"</span> :isDebounce=<span class="string">"true"</span>&gt;</span><br><span class="line">    &lt;botton @mouseleave.prevent=<span class="string">"onAdd"</span>&gt;click + <span class="number">3</span> {{val}}&lt;<span class="regexp">/botton&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>Throttle&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">const app = new Vue({</span></span><br><span class="line"><span class="regexp">  el: "#app",</span></span><br><span class="line"><span class="regexp">  data() {</span></span><br><span class="line"><span class="regexp">    return {</span></span><br><span class="line"><span class="regexp">      val: 0</span></span><br><span class="line"><span class="regexp">    },</span></span><br><span class="line"><span class="regexp">    methods: {</span></span><br><span class="line"><span class="regexp">      onClick($ev,val) {</span></span><br><span class="line"><span class="regexp">        this.val = val</span></span><br><span class="line"><span class="regexp">      },</span></span><br><span class="line"><span class="regexp">      onAdd() {</span></span><br><span class="line"><span class="regexp">        this.val += 3</span></span><br><span class="line"><span class="regexp">      }</span></span><br><span class="line"><span class="regexp">    }</span></span><br><span class="line"><span class="regexp">  }</span></span><br><span class="line"><span class="regexp">})</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;节流-防抖&quot;&gt;&lt;a href=&quot;#节流-防抖&quot; class=&quot;headerlink&quot; title=&quot;节流/防抖&quot;&gt;&lt;/a&gt;节流/防抖&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;1、节流：&lt;ul&gt;
&lt;li&gt;一个函数执行一行后，只有大于设定的执行周期后才会被执行第二次(点击事件)&lt;/
      
    
    </summary>
    
    
    
      <category term="Vue" scheme="http://damao2250.github.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Git分支管理策略</title>
    <link href="http://damao2250.github.com/2020/03/02/Git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/"/>
    <id>http://damao2250.github.com/2020/03/02/Git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/</id>
    <published>2020-03-02T06:10:46.000Z</published>
    <updated>2020-05-14T03:43:39.128Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Git分支管理策略"><a href="#Git分支管理策略" class="headerlink" title="Git分支管理策略"></a>Git分支管理策略</h2><h3 id="一-主分支Master"><a href="#一-主分支Master" class="headerlink" title="一. 主分支Master"></a>一. 主分支Master</h3><p>首先，代码库应该有一个、且仅有一个主分支。所有提供给用户使用的正式版本，都在这个主分支上发布。</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/master.png" alt=""></p><p>Git主分支的名字，默认叫做Master。它是自动建立的，版本库初始化以后，默认就是在主分支在进行开发。</p><h3 id="二、开发分支Develop"><a href="#二、开发分支Develop" class="headerlink" title="二、开发分支Develop"></a>二、开发分支Develop</h3><p>主分支只用来分布重大版本，日常开发应该在另一条分支上完成。我们把开发用的分支，叫做Develop。</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/Develop.png" alt=""></p><p>这个分支可以用来生成代码的最新隔夜版本（nightly）。如果想正式对外发布，就在Master分支上，对Develop分支进行”合并”（merge）。</p><p>Git创建Develop分支的命令：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b develop master</span><br><span class="line"><span class="comment">//后面是跟一个master说明，创建的develop分支是基于当前的master， 如果当前就在master分支，则可以不写。 如果当前分支HEAD指向的是别的分支，又想基于master分支创建，就必须写master</span></span><br></pre></td></tr></tbody></table></figure><p>将Develop分支发布到Master分支的命令：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 切换到Master分支</span></span><br><span class="line">git checkout master</span><br><span class="line"><span class="comment">// 对Develop分支进行合并</span></span><br><span class="line">git merge --no-ff develop</span><br></pre></td></tr></tbody></table></figure><p><code>git merge --no-ff develop</code> 中的 <code>--no-ff</code> 参数是什么意思。默认情况下，Git执行”快进式合并”（fast-farward merge），会直接将Master分支指向Develop分支。</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/merge1.png" alt=""></p><p>使用–no-ff参数后，会执行正常合并，在Master分支上生成一个新节点。(更希望使用这种做法，保证版本演进清晰)</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/merge2.png" alt=""></p><h3 id="三、临时性分支"><a href="#三、临时性分支" class="headerlink" title="三、临时性分支"></a>三、临时性分支</h3><p>前面讲到版本库的两条主要分支：Master和Develop。前者用于正式发布，后者用于日常开发。其实，常设分支只需要这两条就够了，不需要其他了。</p><p>但是，除了常设分支以外，还有一些临时性分支，用于应对一些特定目的的版本开发。临时性分支主要有三种：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 功能（feature）分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 预发布（release）分支</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修补bug（fixbug）分支</span></span><br></pre></td></tr></tbody></table></figure><p>这三种分支都属于临时性需要，使用完以后，应该删除，使得代码库的常设分支始终只有Master和Develop。</p><h3 id="四、-功能分支"><a href="#四、-功能分支" class="headerlink" title="四、 功能分支"></a>四、 功能分支</h3><p>功能分支，它是为了开发某种特定功能，从Develop分支上面分出来的。开发完成后，要再并入Develop。</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/feature-develop.png" alt=""></p><p>功能分支的名字，可以采用feature-*的形式命名。</p><p>创建一个功能分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b feature-x develop</span><br></pre></td></tr></tbody></table></figure><p>开发完成后，将功能分支合并到develop分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff feature-x</span><br></pre></td></tr></tbody></table></figure><p>删除feature分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d feature-x</span><br></pre></td></tr></tbody></table></figure><h3 id="五、预发布分支"><a href="#五、预发布分支" class="headerlink" title="五、预发布分支"></a>五、预发布分支</h3><p>预发布分支，它是指发布正式版本之前（即合并到Master分支之前），我们可能需要有一个预发布的版本进行测试。</p><p>预发布分支是从Develop分支上面分出来的，预发布结束以后，必须合并进Develop和Master分支。它的命名，可以采用release-*的形式。</p><p>创建一个预发布分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b release<span class="number">-1.2</span> develop</span><br></pre></td></tr></tbody></table></figure><p>确认没有问题后，合并到master分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge --no-ff release<span class="number">-1.2</span></span><br><span class="line"><span class="comment">// 对合并生成的新节点，做一个标签</span></span><br><span class="line">git tag -a <span class="number">1.2</span></span><br></pre></td></tr></tbody></table></figure><p>再合并到develop分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff release<span class="number">-1.2</span></span><br></pre></td></tr></tbody></table></figure><p>最后，删除预发布分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d release<span class="number">-1.2</span></span><br></pre></td></tr></tbody></table></figure><h3 id="六、修补bug分支"><a href="#六、修补bug分支" class="headerlink" title="六、修补bug分支"></a>六、修补bug分支</h3><p>最后一种是修补bug分支。软件正式发布以后，难免会出现bug。这时就需要创建一个分支，进行bug修补。</p><p>修补bug分支是从Master分支上面分出来的。修补结束以后，再合并进Master和Develop分支。它的命名，可以采用fixbug-*的形式。</p><p><img src="https://raw.githubusercontent.com/Damao2250/FileTransfer/master/fixbug.png" alt=""></p><p>创建一个修补bug分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b fixbug<span class="number">-0.1</span> master</span><br></pre></td></tr></tbody></table></figure><p>修补结束后，合并到master分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge --no-ff fixbug<span class="number">-0.1</span></span><br><span class="line">git tag -a <span class="number">0.1</span><span class="number">.1</span></span><br></pre></td></tr></tbody></table></figure><p>再合并到develop分支：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff fixbug<span class="number">-0.1</span></span><br></pre></td></tr></tbody></table></figure><p>最后，删除”修补bug分支”：</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d fixbug<span class="number">-0.1</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Git分支管理策略&quot;&gt;&lt;a href=&quot;#Git分支管理策略&quot; class=&quot;headerlink&quot; title=&quot;Git分支管理策略&quot;&gt;&lt;/a&gt;Git分支管理策略&lt;/h2&gt;&lt;h3 id=&quot;一-主分支Master&quot;&gt;&lt;a href=&quot;#一-主分支Master&quot; c
      
    
    </summary>
    
    
    
      <category term="git" scheme="http://damao2250.github.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>一些自己的项目规范</title>
    <link href="http://damao2250.github.com/2020/02/13/%E4%B8%80%E4%BA%9B%E8%87%AA%E5%B7%B1%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83/"/>
    <id>http://damao2250.github.com/2020/02/13/%E4%B8%80%E4%BA%9B%E8%87%AA%E5%B7%B1%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83/</id>
    <published>2020-02-13T03:37:00.000Z</published>
    <updated>2020-05-14T03:28:15.669Z</updated>
    
    <content type="html"><![CDATA[<h1 id="项目目录规范"><a href="#项目目录规范" class="headerlink" title="项目目录规范"></a>项目目录规范</h1><p>└─Code<br>    ├─<a href="http://www.github.com" target="_blank" rel="noopener">www.github.com</a><br>    │  ├─project1<br>    │  ├─project2<br>    │  └─project3<br>    └─<a href="http://www.xxx1.com" target="_blank" rel="noopener">www.xxx1.com</a><br>        ├─project1<br>        ├─project2<br>        └─project3</p><h1 id="项目文件名及项目内命名规范"><a href="#项目文件名及项目内命名规范" class="headerlink" title="项目文件名及项目内命名规范"></a>项目文件名及项目内命名规范</h1><ul><li>组件名，小驼峰：testComponents</li><li>函数名，小驼峰：testFunction</li><li>类名，横线：test-class</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;项目目录规范&quot;&gt;&lt;a href=&quot;#项目目录规范&quot; class=&quot;headerlink&quot; title=&quot;项目目录规范&quot;&gt;&lt;/a&gt;项目目录规范&lt;/h1&gt;&lt;p&gt;└─Code&lt;br&gt;    ├─&lt;a href=&quot;http://www.github.com&quot; target
      
    
    </summary>
    
    
    
      <category term="项目规范" scheme="http://damao2250.github.com/tags/%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>Linux使用笔记</title>
    <link href="http://damao2250.github.com/2020/01/13/Linux%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
    <id>http://damao2250.github.com/2020/01/13/Linux%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/</id>
    <published>2020-01-13T05:50:18.000Z</published>
    <updated>2020-05-14T03:28:56.702Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Linux-软件装在哪里？"><a href="#Linux-软件装在哪里？" class="headerlink" title="Linux 软件装在哪里？"></a>Linux 软件装在哪里？</h2><ol><li><p><code>opt</code>目录</p><pre><code>/opt 是用来安装附加软件包，是用户级程序目录，相当于 D:/soft，opt有可选的意思，安装到/opt目录下的程序，所有的数据、库文件都会放置在同一个目录下</code></pre></li><li><p><code>/usr</code>目录</p><pre><code>/usr: 相当于 C:/Windows/usr/lib: 相当于 C:/Windows/System32/usr/local: 相当于 C:/Progrem Files  是用户级程序目录，用户自己编译的软件默认会安装到此目录（存放手动安装的软件，即不是通过'yum'或'apt-get'安装的软件）它和/usr有相似的目录结构，让软件包管理器来管理/usr，而把自定义脚本放到/usr/local目录下</code></pre></li></ol><p>##　源码放哪里</p><ol><li>/usr/src  系统级的源码目录</li><li>/usr/local/src  用户级的源码目录</li></ol><h2 id="Linux软件包管理（安装、删除）"><a href="#Linux软件包管理（安装、删除）" class="headerlink" title="Linux软件包管理（安装、删除）"></a>Linux软件包管理（安装、删除）</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.</span> 下载软件包：wget 软件包地址</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 手动安装（tar.gz源、tar.bz2源）</span><br><span class="line">  ① 下载相应的软件包，如soft.tar.gz/soft.tar.bz2</span><br><span class="line">  ② cd soft.tar.gz/soft.tar.bz2所在的目录</span><br><span class="line">  ③ tar -xzvf soft.tar.gz     <span class="comment">//一般会生成一个soft目录</span></span><br><span class="line">  ④ cd soft </span><br><span class="line">  ⑤./configure      <span class="comment">// 为编译做准备</span></span><br><span class="line">  ⑥ make            <span class="comment">// 编译软件 （时间很久）</span></span><br><span class="line">  ⑦ make install    <span class="comment">// 安装软件</span></span><br><span class="line">  ⑧ make clean      <span class="comment">// 删除安装产生的临时文件  </span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> rpm包安装</span><br><span class="line">  ① 下载相应的软件包，如soft.version.rpm</span><br><span class="line">  ② cd soft.version.rpm所在的目录</span><br><span class="line">  ③ rpm -ivh soft.version.rpm   <span class="comment">// -i 安装软件 -t 测试安装，不是真的安装 -p 显示安装进度 -f 忽略任何错误 -U 升级安装 -v 检测套件是否正确安装</span></span><br><span class="line">  ④ 卸载 rpm -e 软件名</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> dep包安装</span><br><span class="line">  ① 下载相应的软件包，如soft.version.dep</span><br><span class="line">  ② cd soft.version.dep所在目录</span><br><span class="line">  ③ dpkg -i soft.version.dep</span><br><span class="line">  ④ 卸载 dpkg -e 软件名</span><br><span class="line">  ⑤ 查看已安装的软件包 dpkg –l <span class="string">'*软件包名*'</span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> apt方式安装（安装deb包）</span><br><span class="line">  ① apt-cache search 软件包</span><br><span class="line">  ② apt-<span class="keyword">get</span> install 软件包</span><br><span class="line">  ③ 删除（保留配置文件） apt-<span class="keyword">get</span> remove 软件名</span><br><span class="line">  ④ 删除（不保留配置文件） apt-<span class="keyword">get</span> --purge remove 软件名</span><br><span class="line">  ⑤ dpkg --force-all --purge packagename ——有些软件很难卸载，而且还阻止了别的软件的应用，就可以用这个，不过有点冒险。</span><br><span class="line">    apt-<span class="keyword">get</span> autoremove——因为apt会把已装或已卸的软件都备份在硬盘上，所以如果需要空间的话，可以让这个命令来删除你已经删掉的软件。</span><br><span class="line">    apt-<span class="keyword">get</span> autoclean——定期运行这个命令来清除那些已经卸载的软件包的.deb文件。通过这种方式，可以释放大量的磁盘空间。如果需求十分迫切，可以使用apt-<span class="keyword">get</span> clean以释放更多空间。这个命令会将已安装软件包裹的.deb文件一并删除。</span><br><span class="line">    apt-<span class="keyword">get</span> clean——这个命令会把安装的软件的备份也删除，不过这样不会影响软件的使用的。</span><br><span class="line">    apt-<span class="keyword">get</span> upgrade——更新所有已安装的软件包</span><br><span class="line">    apt-<span class="keyword">get</span> dist-upgrade——将系统升级到新版本</span><br><span class="line">    apt-cache search string——在软件包列表中搜索字符串</span><br><span class="line">    apt-cache showpkg pkgs——显示软件包信息。</span><br><span class="line">    apt-cache stats——查看库里有多少软件</span><br><span class="line">    apt-cache dumpavail——打印可用软件包列表。</span><br><span class="line">    apt-cache show pkgs——显示软件包记录，类似于dpkg –print-avail。</span><br><span class="line">    apt-cache pkgnames——打印软件包列表中所有软件包的名称</span><br><span class="line"></span><br><span class="line">5. yum方式安装</span><br><span class="line">  ① yum -y install 软件包</span><br><span class="line">  ② 卸载 yum remove 软件名</span><br><span class="line">  ③ 已安装列表 yum list all</span><br><span class="line">  ④ 查看软件包信息 yum info 软件名</span><br><span class="line">  ⑥ 升级所有的软件包 yum update 软件名 </span><br><span class="line">  ⑦ 清除所有包缓存  yum clean all </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 切换yum源</span><br><span class="line"></span><br><span class="line">// 首先备份/etc/yum.repos.d/CentOS-Base.repo</span><br><span class="line">// 重命名</span><br><span class="line">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line"></span><br><span class="line">// 下载对应版本 repo 文件, 放入 /etc/yum.repos.d/ (操作前请做好相应备份)</span><br><span class="line">// 163源</span><br><span class="line">CentOS5 ：http://mirrors.163.com/.help/CentOS5-Base-163.repo</span><br><span class="line">CentOS6 ：http://mirrors.163.com/.help/CentOS6-Base-163.repo</span><br><span class="line">CentOS7 ：http://mirrors.163.com/.help/CentOS7-Base-163.repo</span><br><span class="line"></span><br><span class="line">// 阿里云源</span><br><span class="line">CentOS5 ：http://mirrors.aliyun.com/repo/Centos-5.repo</span><br><span class="line">CentOS6 ：http://mirrors.aliyun.com/repo/Centos-6.repo</span><br><span class="line">CentOS7 ：http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"></span><br><span class="line">// 下载</span><br><span class="line">wget http://mirrors.163.com/.help/CentOS6-Base-163.repo</span><br><span class="line"></span><br><span class="line">//重命名</span><br><span class="line">mv CentOS6-Base-163.repo CentOS-Base.repo</span><br><span class="line"></span><br><span class="line">// 运行以下命令生成缓存</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></tbody></table></figure><h2 id="自己在Linux-上的一些操作"><a href="#自己在Linux-上的一些操作" class="headerlink" title="自己在Linux 上的一些操作"></a>自己在Linux 上的一些操作</h2><ul><li><p>安装 node </p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">node -v     <span class="comment">// 查看是否已安装</span></span><br><span class="line">yum install nodejs    <span class="comment">// 安装nodejs 询问时 输入 y</span></span><br><span class="line"></span><br><span class="line">rpm -qa | grep node   <span class="comment">// 查看是否已安装</span></span><br><span class="line"></span><br><span class="line">rpm -ql node    <span class="comment">// 查看安装路径</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>安装 Nginx</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx   <span class="comment">// 安装nginx</span></span><br><span class="line"></span><br><span class="line">systemctl start nginx.service   <span class="comment">// 启动nginx</span></span><br><span class="line">systemctl enable nginx.service    <span class="comment">// 开机启动</span></span><br><span class="line">systemctl stop nginx.service    <span class="comment">// 停止nginx服务</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>配置Nginx</p><ul><li>配置两个ssl证书<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"># For more information on configuration, see:</span><br><span class="line">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="line">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /<span class="keyword">var</span>/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="line">include /usr/share/nginx/modules<span class="comment">/*.conf;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">events {</span></span><br><span class="line"><span class="comment">    worker_connections 1024;</span></span><br><span class="line"><span class="comment">}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">http {</span></span><br><span class="line"><span class="comment">    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span></span><br><span class="line"><span class="comment">                      '$status $body_bytes_sent "$http_referer" '</span></span><br><span class="line"><span class="comment">                      '"$http_user_agent" "$http_x_forwarded_for"';</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    access_log  /var/log/nginx/access.log  main;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    sendfile            on;</span></span><br><span class="line"><span class="comment">    tcp_nopush          on;</span></span><br><span class="line"><span class="comment">    tcp_nodelay         on;</span></span><br><span class="line"><span class="comment">    keepalive_timeout   65;</span></span><br><span class="line"><span class="comment">    types_hash_max_size 2048;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    include             /etc/nginx/mime.types;</span></span><br><span class="line"><span class="comment">    default_type        application/octet-stream;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span></span><br><span class="line"><span class="comment">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span></span><br><span class="line"><span class="comment">    # for more information.</span></span><br><span class="line"><span class="comment">    include /etc/nginx/conf.d/*.conf;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    server {</span></span><br><span class="line"><span class="comment">        listen       80 default_server;</span></span><br><span class="line"><span class="comment">        listen       [::]:80 default_server;</span></span><br><span class="line"><span class="comment">        server_name  www.damao2250.com;</span></span><br><span class="line"><span class="comment">        root         /var/www/damao;</span></span><br><span class="line"><span class="comment">        #告诉浏览器有效期内只准用 https 访问</span></span><br><span class="line"><span class="comment">        add_header Strict-Transport-Security max-age=15768000;</span></span><br><span class="line"><span class="comment">        #永久重定向到 https 站点</span></span><br><span class="line"><span class="comment">        return 301 https://$server_name$request_uri;</span></span><br><span class="line"><span class="comment">    }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Settings for a TLS enabled server.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   server {</span></span><br><span class="line"><span class="comment">       listen       443 ssl http2 default_server;</span></span><br><span class="line"><span class="comment">       listen       [::]:443 ssl http2 default_server;</span></span><br><span class="line"><span class="comment">       server_name  www.damao2250.com;</span></span><br><span class="line"><span class="comment">       root         /var/www/damao;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       ssl_certificate "/opt/ssl/www.damao2250.com/www.damao2250.com.pem";</span></span><br><span class="line"><span class="comment">       ssl_certificate_key "/opt/ssl/www.damao2250.com/www.damao2250.com.key";</span></span><br><span class="line"><span class="comment">       ssl_session_cache shared:SSL:1m;</span></span><br><span class="line"><span class="comment">       ssl_session_timeout  10m;</span></span><br><span class="line"><span class="comment">       ssl_ciphers HIGH:!aNULL:!MD5;</span></span><br><span class="line"><span class="comment">       ssl_prefer_server_ciphers on;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       # Load configuration files for the default server block.</span></span><br><span class="line"><span class="comment">       include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       location / {</span></span><br><span class="line"><span class="comment">       }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       error_page 404 /404.html;</span></span><br><span class="line"><span class="comment">           location = /40x.html {</span></span><br><span class="line"><span class="comment">       }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       error_page 500 502 503 504 /50x.html;</span></span><br><span class="line"><span class="comment">           location = /50x.html {</span></span><br><span class="line"><span class="comment">       }</span></span><br><span class="line"><span class="comment">   }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    server {</span></span><br><span class="line"><span class="comment">        listen       80;</span></span><br><span class="line"><span class="comment">        server_name  ycy.damao2250.com;</span></span><br><span class="line"><span class="comment">        #告诉浏览器有效期内只准用 https 访问</span></span><br><span class="line"><span class="comment">        add_header Strict-Transport-Security max-age=15768000;</span></span><br><span class="line"><span class="comment">        #永久重定向到 https 站点</span></span><br><span class="line"><span class="comment">        return 301 https://$server_name$request_uri;</span></span><br><span class="line"><span class="comment">    }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Settings for a TLS enabled server.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   server {</span></span><br><span class="line"><span class="comment">       listen       443 ssl http2;</span></span><br><span class="line"><span class="comment">       listen       [::]:443 ssl http2;</span></span><br><span class="line"><span class="comment">       server_name  ycy.damao2250.com;</span></span><br><span class="line"><span class="comment">       root         /var/www/ycy;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       ssl_certificate "/opt/ssl/ycy.damao2250.com/ycy.damao2250.com.pem";</span></span><br><span class="line"><span class="comment">       ssl_certificate_key "/opt/ssl/ycy.damao2250.com/ycy.damao2250.com.key";</span></span><br><span class="line"><span class="comment">       ssl_session_cache shared:SSL:1m;</span></span><br><span class="line"><span class="comment">       ssl_session_timeout  10m;</span></span><br><span class="line"><span class="comment">       ssl_ciphers HIGH:!aNULL:!MD5;</span></span><br><span class="line"><span class="comment">       ssl_prefer_server_ciphers on;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       # Load configuration files for the default server block.</span></span><br><span class="line"><span class="comment">       include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       location / {</span></span><br><span class="line"><span class="comment">       }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       error_page 404 /404.html;</span></span><br><span class="line"><span class="comment">           location = /40x.html {</span></span><br><span class="line"><span class="comment">       }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">       error_page 500 502 503 504 /50x.html;</span></span><br><span class="line"><span class="comment">           location = /50x.html {</span></span><br><span class="line"><span class="comment">       }</span></span><br><span class="line"><span class="comment">   }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">}</span></span><br></pre></td></tr></tbody></table></figure></li></ul></li></ul><h2 id="部署Gitlab"><a href="#部署Gitlab" class="headerlink" title="部署Gitlab"></a>部署Gitlab</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 安装依赖软件</span></span><br><span class="line">yum -y install policycoreutils  policycoreutils-python openssh-server openssh-clients postfix</span><br><span class="line"><span class="comment">// but already installed and latest version  &amp;&amp;　Nothing to do</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 开启postfix， postfix支持gitlab发信功能，设置postfix开机自启</span></span><br><span class="line">systemctl enable postfix &amp;&amp; systemctl start postfix</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如若 postfix 无法启动</span></span><br><span class="line"><span class="comment">// 修改 /etc/postfix/main.cf</span></span><br><span class="line">inet_interfaces = all</span><br><span class="line">inet_protocols = ipv4</span><br><span class="line">systemctl start postfix</span><br><span class="line">systemctl enable postfix</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如无法ssh来远程连接主机的 开启 ssh </span></span><br><span class="line">systemctl enable sshd</span><br><span class="line">systemctl start sshd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 安装防火墙</span></span><br><span class="line">yum install firewalld systemd -y</span><br><span class="line"><span class="comment">// 开启防火墙</span></span><br><span class="line">service firewalld start</span><br><span class="line"><span class="comment">// 添加http服务到firewalld,pemmanent表示永久生效，若不加--permanent系统下次启动后就会失效。</span></span><br><span class="line">firewall-cmd --permanent --add-service=http</span><br><span class="line"><span class="comment">// 重启防火墙</span></span><br><span class="line">systemctl reload firewalld</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 下载gitlab</span></span><br><span class="line">wget https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-12.5.0-ce.0.el7.x86_64.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 安装 ce代表社区版 ee代表企业版</span></span><br><span class="line">rpm -i gitlab-ce<span class="number">-12.5</span><span class="number">.0</span>-ce<span class="number">.0</span>.el7.x86_64.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改配置文件 gitlab.rb  使用外部nginx 不使用内部nginx</span></span><br><span class="line">vim /etc/gitlab/gitlab.rb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">external_url <span class="string">'http://120.79.166.206:8888'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重置并启动gitlab</span></span><br><span class="line">gitlab-ctl stop</span><br><span class="line"></span><br><span class="line">gitlab-ctl reconfigure</span><br><span class="line"></span><br><span class="line">gitlab-ctl restart</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果执行 gitlab-ctl reconfigure 卡死在 ruby_block[authorize Grafana with GitLab] action run   就强制结束  ctrl+c 然后</span></span><br><span class="line">systemctl restart gitlab-runsvdir</span><br><span class="line"><span class="comment">// 再</span></span><br><span class="line">gitlab-ctl stop</span><br><span class="line">gitlab-ctl reconfigure</span><br><span class="line">gitlab-ctl restart</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问报502。原因是nginx用户无法访问gitlab用户的socket文件。 重启gitlab需要重新授权</span></span><br><span class="line">chmod -R o+x /<span class="keyword">var</span>/opt/gitlab/gitlab-rails</span><br><span class="line"><span class="comment">// 访问502也可能是  内存太小 超时了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始账户: root 密码:5iveL!fe</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 完全卸载GitLab</span></span><br><span class="line"><span class="comment">// 一. 停止gitlab</span></span><br><span class="line"><span class="comment">// sudo gitlab-ctl stop</span></span><br><span class="line"><span class="comment">// 二、卸载gitlab（这块注意了，看看是gitlab-ce版本还是gitlab-ee版本，别写错误了）</span></span><br><span class="line"><span class="comment">// sudo rpm -e gitlab-ce</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 三、查看gitlab进程</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ps -ef|grep gitlab</span></span><br><span class="line"><span class="comment">// 　 &nbsp; &nbsp;杀掉第一个守护进程(runsvdir -P /opt/gitlab/service log)</span></span><br><span class="line"><span class="comment">// 　 &nbsp; &nbsp;kill -9 4473</span></span><br><span class="line"><span class="comment">// 　 &nbsp; &nbsp;再次查看gitlab进程是否存在</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 四、删除gitlab文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;find / -name *gitlab*|xargs rm -rf &nbsp; &nbsp; &nbsp;删除所有包含gitlab的文件及目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;find / -name gitlab |xargs rm -rf&nbsp;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;删除gitlab-ctl uninstall时自动在root下备份的配置文件（ls /root/gitlab* 看看有没有，有也删除）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过以上几步就可以彻底卸载gitlab</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Linux-软件装在哪里？&quot;&gt;&lt;a href=&quot;#Linux-软件装在哪里？&quot; class=&quot;headerlink&quot; title=&quot;Linux 软件装在哪里？&quot;&gt;&lt;/a&gt;Linux 软件装在哪里？&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;opt&lt;/code&gt;目
      
    
    </summary>
    
    
    
      <category term="Linux" scheme="http://damao2250.github.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Windows下的Nginx及OpenResty的基础使用</title>
    <link href="http://damao2250.github.com/2019/12/31/Windows%E4%B8%8B%E7%9A%84Nginx%E5%8F%8AOpenResty%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
    <id>http://damao2250.github.com/2019/12/31/Windows%E4%B8%8B%E7%9A%84Nginx%E5%8F%8AOpenResty%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</id>
    <published>2019-12-31T00:56:56.000Z</published>
    <updated>2020-05-14T03:30:00.766Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Nginx基础命令"><a href="#Nginx基础命令" class="headerlink" title="Nginx基础命令"></a>Nginx基础命令</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 启动</span></span><br><span class="line">start nginx</span><br><span class="line">nginx.exe</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止</span></span><br><span class="line">nginx -s stop   <span class="comment">// 快速停止，不保存信息</span></span><br><span class="line">nginx -s quit   <span class="comment">// 完整有序停止并保存信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新载入</span></span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新打开日志文件</span></span><br><span class="line">nginx -s reopen</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看 Nginx 版本</span></span><br><span class="line">nginx -v  <span class="comment">// 简单</span></span><br><span class="line">nginx -V  <span class="comment">// 详细</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 查看 Nginx 是否正常启动</span></span><br><span class="line">tasklist/fi <span class="string">"imagename eq nginx.exe"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 杀对应pid进程</span></span><br><span class="line">taskklii /pid {pid}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 强制杀对应pid进程</span></span><br><span class="line">taskklii /pid {pid} /f</span><br><span class="line"></span><br><span class="line"><span class="comment">// 杀nginx全部进程</span></span><br><span class="line">taskkill /im nginx.exe /f</span><br></pre></td></tr></tbody></table></figure><h2 id="Nginx配置详解"><a href="#Nginx配置详解" class="headerlink" title="Nginx配置详解"></a>Nginx配置详解</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ########### 每个指令必须有分号结束。#################</span></span><br><span class="line"><span class="comment">// #user administrator administrators;  #配置用户或者组，默认为nobody nobody。</span></span><br><span class="line"><span class="comment">// #worker_processes 2;  #允许生成的进程数，默认为1</span></span><br><span class="line"><span class="comment">// #pid /nginx/pid/nginx.pid;   #指定nginx进程运行文件存放地址</span></span><br><span class="line"><span class="comment">// error_log log/error.log debug;  #制定日志路径，级别。这个设置可以放入全局块，http块，server块，级别以此为：debug|info|notice|warn|error|crit|alert|emerg</span></span><br><span class="line"><span class="comment">// events {</span></span><br><span class="line"><span class="comment">//     accept_mutex on;   #设置网路连接序列化，防止惊群现象发生，默认为on</span></span><br><span class="line"><span class="comment">//     multi_accept on;  #设置一个进程是否同时接受多个网络连接，默认为off</span></span><br><span class="line"><span class="comment">//     #use epoll;      #事件驱动模型，select|poll|kqueue|epoll|resig|/dev/poll|eventport</span></span><br><span class="line"><span class="comment">//     worker_connections  1024;    #最大连接数，默认为512</span></span><br><span class="line"><span class="comment">// }</span></span><br><span class="line"><span class="comment">// http {</span></span><br><span class="line"><span class="comment">//     include       mime.types;   #文件扩展名与文件类型映射表</span></span><br><span class="line"><span class="comment">//     default_type  application/octet-stream; #默认文件类型，默认为text/plain</span></span><br><span class="line"><span class="comment">//     #access_log off; #取消服务日志    </span></span><br><span class="line"><span class="comment">//     log_format myFormat '$remote_addr–$remote_user [$time_local] $request $status $body_bytes_sent $http_referer $http_user_agent $http_x_forwarded_for'; #自定义格式</span></span><br><span class="line"><span class="comment">//     access_log log/access.log myFormat;  #combined为日志格式的默认值</span></span><br><span class="line"><span class="comment">//     sendfile on;   #允许sendfile方式传输文件，默认为off，可以在http块，server块，location块。</span></span><br><span class="line"><span class="comment">//     sendfile_max_chunk 100k;  #每个进程每次调用传输数量不能大于设定的值，默认为0，即不设上限。</span></span><br><span class="line"><span class="comment">//     keepalive_timeout 65;  #连接超时时间，默认为75s，可以在http，server，location块。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//     upstream mysvr {   </span></span><br><span class="line"><span class="comment">//       server 127.0.0.1:7878;</span></span><br><span class="line"><span class="comment">//       server 192.168.10.121:3333 backup;  #热备</span></span><br><span class="line"><span class="comment">//     }</span></span><br><span class="line"><span class="comment">//     error_page 404 https://www.baidu.com; #错误页</span></span><br><span class="line"><span class="comment">//     server {</span></span><br><span class="line"><span class="comment">//         keepalive_requests 120; #单连接请求上限次数。</span></span><br><span class="line"><span class="comment">//         listen       4545;   #监听端口</span></span><br><span class="line"><span class="comment">//         server_name  127.0.0.1;   #监听地址       </span></span><br><span class="line"><span class="comment">//         location  ~*^.+$ {       #请求的url过滤，正则匹配，~为区分大小写，~*为不区分大小写。</span></span><br><span class="line"><span class="comment">//            #root path;  #根目录</span></span><br><span class="line"><span class="comment">//            #index vv.txt;  #设置默认页</span></span><br><span class="line"><span class="comment">//            proxy_pass  http://mysvr;  #请求转向mysvr 定义的服务器列表</span></span><br><span class="line"><span class="comment">//            deny 127.0.0.1;  #拒绝的ip</span></span><br><span class="line"><span class="comment">//            allow 172.18.5.54; #允许的ip           </span></span><br><span class="line"><span class="comment">//         } </span></span><br><span class="line"><span class="comment">//     }</span></span><br><span class="line"><span class="comment">// }</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// # 1.$remote_addr 与 $http_x_forwarded_for 用以记录客户端的ip地址；</span></span><br><span class="line"><span class="comment">// # 2.$remote_user ：用来记录客户端用户名称；</span></span><br><span class="line"><span class="comment">// # 3.$time_local ： 用来记录访问时间与时区；</span></span><br><span class="line"><span class="comment">// # 4.$request ： 用来记录请求的url与http协议；</span></span><br><span class="line"><span class="comment">// # 5.$status ： 用来记录请求状态；成功是200；</span></span><br><span class="line"><span class="comment">// # 6.$body_bytes_s ent ：记录发送给客户端文件主体内容大小；</span></span><br><span class="line"><span class="comment">// # 7.$http_referer ：用来记录从那个页面链接访问过来的；</span></span><br><span class="line"><span class="comment">// # 8.$http_user_agent ：记录客户端浏览器的相关信息；</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// # 1、全局块（events块之前）：配置影响nginx全局的指令。一般有运行nginx服务器的用户组，nginx进程pid存放路径，日志存放路径，配置文件引入，允许生成worker process数等。</span></span><br><span class="line"><span class="comment">// # 2、events块：配置影响nginx服务器或与用户的网络连接。有每个进程的最大连接数，选取哪种事件驱动模型处理连接请求，是否允许同时接受多个网路连接，开启多个网络连接序列化等。</span></span><br><span class="line"><span class="comment">// # 3、http块：可以嵌套多个server，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置。如文件引入，mime-type定义，日志自定义，是否使用sendfile传输文件，连接超时时间，单连接请求数等。</span></span><br><span class="line"><span class="comment">// # 4、server块：配置虚拟主机的相关参数，一个http中可以有多个server。</span></span><br><span class="line"><span class="comment">// # 5、location块：配置请求的路由，以及各种页面的处理情况。</span></span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Nginx基础命令&quot;&gt;&lt;a href=&quot;#Nginx基础命令&quot; class=&quot;headerlink&quot; title=&quot;Nginx基础命令&quot;&gt;&lt;/a&gt;Nginx基础命令&lt;/h2&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;t
      
    
    </summary>
    
    
    
      <category term="Nginx" scheme="http://damao2250.github.com/tags/Nginx/"/>
    
  </entry>
  
  <entry>
    <title>MongoDB及mLab的基础使用</title>
    <link href="http://damao2250.github.com/2019/12/31/MongoDB%E5%8F%8AmLab%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
    <id>http://damao2250.github.com/2019/12/31/MongoDB%E5%8F%8AmLab%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</id>
    <published>2019-12-31T00:55:54.000Z</published>
    <updated>2020-05-14T03:29:11.811Z</updated>
    
    <content type="html"><![CDATA[<script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;script&gt;
        document.querySelectorAll(&#39;.github-emoji&#39;)
          .forEach(el =&gt; {
            if (!el.dataset.src) { return; }
        
      
    
    </summary>
    
    
    
      <category term="MongoDB" scheme="http://damao2250.github.com/tags/MongoDB/"/>
    
  </entry>
  
  <entry>
    <title>解决elment-ui折叠和收缩导航栏延时动画效果</title>
    <link href="http://damao2250.github.com/2019/12/12/%E8%A7%A3%E5%86%B3elment-ui%E6%8A%98%E5%8F%A0%E5%92%8C%E6%94%B6%E7%BC%A9%E5%AF%BC%E8%88%AA%E6%A0%8F%E5%BB%B6%E6%97%B6%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C/"/>
    <id>http://damao2250.github.com/2019/12/12/%E8%A7%A3%E5%86%B3elment-ui%E6%8A%98%E5%8F%A0%E5%92%8C%E6%94%B6%E7%BC%A9%E5%AF%BC%E8%88%AA%E6%A0%8F%E5%BB%B6%E6%97%B6%E5%8A%A8%E7%94%BB%E6%95%88%E6%9E%9C/</id>
    <published>2019-12-12T07:03:04.000Z</published>
    <updated>2020-05-14T03:34:57.626Z</updated>
    
    <content type="html"><![CDATA[<h2 id="解决elment-ui折叠和收缩导航栏延时动画效果"><a href="#解决elment-ui折叠和收缩导航栏延时动画效果" class="headerlink" title="解决elment-ui折叠和收缩导航栏延时动画效果"></a>解决elment-ui折叠和收缩导航栏延时动画效果</h2><ul><li><p>解决方法：</p><ol><li><p>最外层包一层div</p></li><li><p>通过div类名设置样式穿透</p> <figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.layout-aside-menu /deep/ .collapse-transition {</span><br><span class="line">  <span class="selector-tag">-webkit-transition</span>: 0<span class="selector-tag">s</span> <span class="selector-tag">height</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-top</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-bottom</span>;</span><br><span class="line">  <span class="selector-tag">transition</span>: 0<span class="selector-tag">s</span> <span class="selector-tag">height</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-top</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-bottom</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.layout-aside-menu /deep/ .horizontal-collapse-transition {</span><br><span class="line">  <span class="selector-tag">-webkit-transition</span>: 0<span class="selector-tag">s</span> <span class="selector-tag">width</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-left</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-right</span>;</span><br><span class="line">  <span class="selector-tag">transition</span>: 0<span class="selector-tag">s</span> <span class="selector-tag">width</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-left</span>, 0<span class="selector-tag">s</span> <span class="selector-tag">padding-right</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.layout-aside-menu /deep/ .horizontal-collapse-transition .el-submenu__title .el-submenu__icon-arrow {</span><br><span class="line">  <span class="selector-tag">-webkit-transition</span>: 0<span class="selector-tag">s</span>;</span><br><span class="line">  <span class="selector-tag">transition</span>: 0<span class="selector-tag">s</span>;</span><br><span class="line">  <span class="selector-tag">opacity</span>: 0;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ol></li><li><p>补充点：</p><ol><li><p>stylus的样式穿透 使用 <code>&gt;&gt;&gt;</code></p><p> 外层 <code>&gt;&gt;&gt;</code> 第三方组件 {</p><p>   样式</p><p> }</p> <figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &gt;&gt;&gt; <span class="selector-class">.swiper-pagination-bullet-active</span></span><br><span class="line"><span class="selector-tag">background</span>: <span class="selector-id">#fff</span></span><br></pre></td></tr></tbody></table></figure></li><li><p><code>sass</code>和<code>less</code>的样式穿透 使用 <code>/deep/</code></p><p> 外层 <code>/deep/</code> 第三方组件 {</p><p>   样式</p><p> }</p> <figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.wrapper /deep/ .swiper-pagination-bullet-active{</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-id">#fff</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ol></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;解决elment-ui折叠和收缩导航栏延时动画效果&quot;&gt;&lt;a href=&quot;#解决elment-ui折叠和收缩导航栏延时动画效果&quot; class=&quot;headerlink&quot; title=&quot;解决elment-ui折叠和收缩导航栏延时动画效果&quot;&gt;&lt;/a&gt;解决elment-ui
      
    
    </summary>
    
    
    
      <category term="Element-ui" scheme="http://damao2250.github.com/tags/Element-ui/"/>
    
  </entry>
  
  <entry>
    <title>hexo-theme-indigo使用遇到的问题</title>
    <link href="http://damao2250.github.com/2019/12/11/hexo-theme-indigo%E4%BD%BF%E7%94%A8%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://damao2250.github.com/2019/12/11/hexo-theme-indigo%E4%BD%BF%E7%94%A8%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2019-12-11T07:15:51.000Z</published>
    <updated>2020-05-15T06:26:56.227Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Hexo-主题地址"><a href="#Hexo-主题地址" class="headerlink" title="Hexo 主题地址"></a>Hexo 主题地址</h2><ul><li><a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank" rel="noopener">https://github.com/yscoder/hexo-theme-indigo</a></li></ul><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul><li><p>主页的导航栏关闭的×按钮，以及搜索按钮，分享按钮，每次点击出现动画前都会新打开一个about:blank#blocked页面。查看html发现相应的 a标签中都有 target=’_blank’</p></li><li><p>可能是在编译的时候默认把a标签的target属性自动补上了，要是a标签本身就有target这个属性就不会往上加了</p></li><li><p>解决： </p><ul><li>菜单关闭按钮</li></ul><ol><li>打开<code>themes\indigo\layout_partial\menu.ejs</code></li><li>找到 <code>id="menu-off"</code> 的a标签</li><li>在a标签上新增 <code>target=""</code></li></ol><ul><li>搜索图标菜单关闭按钮</li></ul><ol><li>打开<code>themes\indigo\layout_partial\header.ejs</code></li><li>找到 <code>id="search"</code> 的a标签</li><li>在a标签上新增 <code>target=""</code></li></ol><ul><li>右侧分享按钮</li></ul><ol><li>打开 <code>themes\indigo\layout_partial\header.ejs</code></li><li>找到 <code>id="menuShare"</code> 的a标签</li><li>在a标签上新增 <code>target=""</code></li></ol><ul><li>点击赞赏按钮、关闭赞赏框</li></ul><ol><li>打开 <code>themes\indigo\layout\_partial\post.ejs</code></li><li>找到 <code>id="rewardBtn"</code> 的a标签</li><li>在a标签上新增 <code>target=""</code></li><li>打开 <code>themes\indigo\layout\_partial\post\reward.ejs</code></li><li>找到 <code>id="rewardOff"</code> 的a标签</li><li>在a标签上新增 <code>target=""</code></li></ol></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Hexo-主题地址&quot;&gt;&lt;a href=&quot;#Hexo-主题地址&quot; class=&quot;headerlink&quot; title=&quot;Hexo 主题地址&quot;&gt;&lt;/a&gt;Hexo 主题地址&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/yscoder/
      
    
    </summary>
    
    
    
      <category term="Hexo" scheme="http://damao2250.github.com/tags/Hexo/"/>
    
  </entry>
  
</feed>
